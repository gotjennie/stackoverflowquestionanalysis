(dp0
Vhas_more
p1
I00
sVitems
p2
(lp3
(dp4
Vbody
p5
V<pre><code>For this version of Visual C++  Use this compiler version\u000aVisual C++ 4.x                  MSC_VER=1000\u000aVisual C++ 5                    MSC_VER=1100\u000aVisual C++ 6                    MSC_VER=1200\u000aVisual C++ .NET                 MSC_VER=1300\u000aVisual C++ .NET 2003            MSC_VER=1310\u000aVisual C++ 2005  (8.0)          MSC_VER=1400\u000aVisual C++ 2008  (9.0)          MSC_VER=1500\u000aVisual C++ 2010 (10.0)          MSC_VER=1600\u000aVisual C++ 2012 (11.0)          MSC_VER=1700\u000aVisual C++ 2013 (12.0)          MSC_VER=1800\u000aVisual C++ 2015 (14.0)          MSC_VER=1900\u000aVisual C++ 2017 (15.0)          MSC_VER=1910\u000a</code></pre>\u000a
p6
sVquestion_id
p7
I2676763
sVlast_activity_date
p8
I1495095408
sVcreation_date
p9
I1271781240
sVscore
p10
I135
sVowner
p11
(dp12
Vuser_id
p13
I184977
sVprofile_image
p14
Vhttps://www.gravatar.com/avatar/e3628210605e74774a158584529569f9?s=128&d=identicon&r=PG
p15
sVuser_type
p16
Vregistered
p17
sVreputation
p18
I5942
sVlink
p19
Vhttp://stackoverflow.com/users/184977/orhan-cinar
p20
sVaccept_rate
p21
I100
sVdisplay_name
p22
VOrhan Cinar
p23
ssVis_accepted
p24
I01
sVlast_edit_date
p25
I1495095408
sVanswer_id
p26
I2676904
sa(dp27
Vbody
p28
V<pre><code>&gt;&gt;&gt; '{0:08b}'.format(6)\u000a'00000110'\u000a</code></pre>\u000a\u000a<p>Just to explain the parts of the formatting string:</p>\u000a\u000a<ul>\u000a<li><code>{}</code> places a variable into a string</li>\u000a<li><code>0</code> takes the variable at argument position 0</li>\u000a<li><code>:</code> adds formatting options for this variable (otherwise it would represent decimal <code>6</code>)</li>\u000a<li><code>08</code> formats the number to eight digits zero-padded on the left</li>\u000a<li><code>b</code> converts the number to its binary representation</li>\u000a</ul>\u000a
p29
sVquestion_id
p30
I10411085
sVlast_activity_date
p31
I1494660107
sVcreation_date
p32
I1335951176
sVscore
p33
I182
sVowner
p34
(dp35
Vuser_id
p36
I449449
sVprofile_image
p37
Vhttps://www.gravatar.com/avatar/b52c27e86c87d931e654d6a2d2cdf974?s=128&d=identicon&r=PG
p38
sVuser_type
p39
Vregistered
p40
sVreputation
p41
I94835
sVlink
p42
Vhttp://stackoverflow.com/users/449449/eumiro
p43
sVaccept_rate
p44
I100
sVdisplay_name
p45
Veumiro
p46
ssVis_accepted
p47
I01
sVlast_edit_date
p48
I1494660107
sVanswer_id
p49
I10411108
sa(dp50
Vbody
p51
V<p><a href="https://docs.python.org/3/library/threading.html#threading.get_ident" rel="nofollow noreferrer"><code>threading.get_ident()</code></a> works, or <a href="http://docs.python.org/library/threading.html#threading.current_thread" rel="nofollow noreferrer"><code>threading.current_thread()</code></a> (or <code>threading.currentThread()</code> for Python &lt; 2.6).</p>\u000a
p52
sVquestion_id
p53
I919897
sVlast_activity_date
p54
I1492954129
sVcreation_date
p55
I1243502020
sVscore
p56
I103
sVowner
p57
(dp58
Vuser_id
p59
I6372
sVprofile_image
p60
Vhttps://www.gravatar.com/avatar/fbff5bc41ed88240c76f35d6fe5bf12f?s=128&d=identicon&r=PG
p61
sVuser_type
p62
Vregistered
p63
sVreputation
p64
I33802
sVlink
p65
Vhttp://stackoverflow.com/users/6372/nicholas-riley
p66
sVaccept_rate
p67
I86
sVdisplay_name
p68
VNicholas Riley
p69
ssVis_accepted
p70
I01
sVlast_edit_date
p71
I1492954129
sVanswer_id
p72
I919928
sa(dp73
Vbody
p74
V<p>I would use <a href="https://github.com/yyuu/pyenv" rel="noreferrer">pyenv</a> You can install it:</p>\u000a\u000a<pre><code>$ brew install pyenv\u000a</code></pre>\u000a\u000a<p>To enable pyenv in your Bash shell, you need to run:</p>\u000a\u000a<pre><code>$ eval "$(pyenv init -)"\u000a</code></pre>\u000a\u000a<p>To do this automatically for Bash upon startup, add that line to your <code>~/.bash_profile</code>. <sup>1</sup></p>\u000a\u000a<h2>Usage:</h2>\u000a\u000a<p>Once you have installed pyenv and activated it, you can install different versions of python and choose which one you can use. Example:</p>\u000a\u000a<pre><code>$ pyenv install 2.7.5\u000a</code></pre>\u000a\u000a<p>You can check the versions you have installed with:</p>\u000a\u000a<pre><code>$ pyenv versions\u000a</code></pre>\u000a\u000a<p>And you can switch between python versions with the command:</p>\u000a\u000a<pre><code>$ pyenv global 3.3.1\u000a</code></pre>\u000a\u000a<p>Also you can set a python version for the current directory with:</p>\u000a\u000a<pre><code>$ pyenv local 3.5.2\u000a</code></pre>\u000a\u000a<p>You can check by running <code>python --version</code>:</p>\u000a\u000a<pre><code>$ python --version\u000aPython 3.5.2\u000a</code></pre>\u000a\u000a<hr>\u000a\u000a<p><sup>1</sup><sub> Homebrew used to instruct you to do this upon installation of pyenv, but <a href="https://github.com/Homebrew/homebrew-core/commit/d82ef4e9a5105c9c5da086025c57f89929811763" rel="noreferrer">the message was removed</a>. For Zsh and other shells, the precise steps may be different.</sub></p>\u000a
p75
sVquestion_id
p76
I18671253
sVlast_activity_date
p77
I1490625685
sVcreation_date
p78
I1378542023
sVscore
p79
I150
sVowner
p80
(dp81
Vuser_id
p82
I340298
sVprofile_image
p83
Vhttps://www.gravatar.com/avatar/4a6f75b10333059892559469e700964e?s=128&d=identicon&r=PG
p84
sVuser_type
p85
Vregistered
p86
sVreputation
p87
I5925
sVlink
p88
Vhttp://stackoverflow.com/users/340298/moliware
p89
sVdisplay_name
p90
Vmoliware
p91
ssVis_accepted
p92
I01
sVlast_edit_date
p93
I1490625685
sVanswer_id
p94
I18671336
sa(dp95
Vbody
p96
V<p>They're both correct, but yours is preferred from the point of view of numerical stability.</p>\u000a\u000a<p>You start with</p>\u000a\u000a<p>e ^ (x - max(x)) / sum(e^(x - max(x))</p>\u000a\u000a<p>By using the fact that a^(b - c) = (a^b)/(a^c) we have</p>\u000a\u000a<p>= e ^ x / e ^ max(x) * sum(e ^ x / e ^ max(x))</p>\u000a\u000a<p>= e ^ x / sum(e ^ x)</p>\u000a\u000a<p>Which is what the other answer says. You could replace max(x) with any variable and it would cancel out.</p>\u000a
p97
sVquestion_id
p98
I34968722
sVlast_activity_date
p99
I1488657203
sVcreation_date
p100
I1453586406
sVscore
p101
I40
sVowner
p102
(dp103
Vuser_id
p104
I1546343
sVprofile_image
p105
Vhttps://www.gravatar.com/avatar/b608f7329305fa7316d07b86cc447eaa?s=128&d=identicon&r=PG
p106
sVuser_type
p107
Vregistered
p108
sVreputation
p109
I2201
sVlink
p110
Vhttp://stackoverflow.com/users/1546343/trevor-merrifield
p111
sVdisplay_name
p112
VTrevor Merrifield
p113
ssVis_accepted
p114
I01
sVlast_edit_date
p115
I1488657203
sVanswer_id
p116
I34969389
sa(dp117
Vbody
p118
V<p>Alternatively, if you want to simply set the number of ticks while allowing matplotlib to position them (currently only with <code>MaxNLocator</code>), there is <a href="http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.locator_params" rel="noreferrer"><code>pyplot.locator_params</code></a>,</p>\u000a\u000a<pre><code>pyplot.locator_params(nticks=4)\u000a</code></pre>\u000a\u000a<p>You can specify specific axis in this method as mentioned below, default is both:</p>\u000a\u000a<pre><code># To specify the number of ticks on both or any single axes\u000apyplot.locator_params(axis='y', nticks=6)\u000apyplot.locator_params(axis='x', nticks=10)\u000a</code></pre>\u000a
p119
sVquestion_id
p120
I6682784
sVlast_activity_date
p121
I1487281503
sVcreation_date
p122
I1353077477
sVscore
p123
I167
sVowner
p124
(dp125
Vuser_id
p126
I1102851
sVprofile_image
p127
Vhttps://www.gravatar.com/avatar/0e1866c32c13460429d2f9ba066949bc?s=128&d=identicon&r=PG
p128
sVuser_type
p129
Vregistered
p130
sVreputation
p131
I3161
sVlink
p132
Vhttp://stackoverflow.com/users/1102851/bgamari
p133
sVaccept_rate
p134
I57
sVdisplay_name
p135
Vbgamari
p136
ssVis_accepted
p137
I01
sVlast_edit_date
p138
I1487281503
sVanswer_id
p139
I13418954
sa(dp140
Vbody
p141
V<p>Tuples are compared position by position: \u000athe first item of first tuple is compared to the first item of the second tuple; if they are not equal, this is the result of the comparison, else the second item is considered, then the third and so on.</p>\u000a\u000a<p>See <a href="http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange" rel="noreferrer">doc</a>:</p>\u000a\u000a<blockquote>\u000a  <p>Sequence types also support comparisons. In particular, tuples and lists are compared lexicographically by comparing corresponding elements. This means that to compare equal, every element must compare equal and the two sequences must be of the same type and have the same length.</p>\u000a</blockquote>\u000a\u000a<p>Also <a href="http://docs.python.org/reference/expressions.html#notin" rel="noreferrer">this</a>:</p>\u000a\u000a<blockquote>\u000a  <p>Tuples and lists are compared lexicographically using comparison of corresponding elements. This means that to compare equal, each element must compare equal and the two sequences must be of the same type and have the same length.</p>\u000a</blockquote>\u000a\u000a<p>If not equal, the sequences are ordered the same as their first differing elements. For example, cmp([1,2,x], [1,2,y]) returns the same as cmp(x,y). If the corresponding element does not exist, the shorter sequence is considered smaller (for example, [1,2] &lt; [1,2,3] returns True).</p>\u000a\u000a<p><strong>Note</strong> that <code>&lt;</code> and <code>&gt;</code> do not mean "smaller then" and "greater then" but "is before" and "is after": so (0, 1) "is before" (1, 0).</p>\u000a\u000a<p><strong>Note 2</strong>: tuples must not be considered as coordinates in a <em>n-dimensional</em> space!</p>\u000a\u000a<p><strong>Note 3</strong>: referring to question <a href="http://stackoverflow.com/questions/36911617/python-2-tuple-comparison">Python 2 tuple comparison</a>: do not think that a tuple is "greater" than another only if any element of the first is greater than the corresponding one in the second </p>\u000a
p142
sVquestion_id
p143
I5292303
sVlast_activity_date
p144
I1478265204
sVcreation_date
p145
I1300049907
sVscore
p146
I99
sVowner
p147
(dp148
Vuser_id
p149
I463621
sVprofile_image
p150
Vhttps://www.gravatar.com/avatar/c27c03773679c6a3105ce4e200d3268a?s=128&d=identicon&r=PG
p151
sVuser_type
p152
Vregistered
p153
sVreputation
p154
I9007
sVlink
p155
Vhttp://stackoverflow.com/users/463621/don
p156
sVaccept_rate
p157
I67
sVdisplay_name
p158
VDon
p159
ssVis_accepted
p160
I01
sVlast_edit_date
p161
I1478265204
sVanswer_id
p162
I5292332
sa(dp163
Vbody
p164
V<p><a href="http://docs.python.org/library/linecache.html" rel="nofollow noreferrer">linecache</a>:</p>\u000a\u000a<blockquote>\u000a  <p>The <a href="https://docs.python.org/3/library/linecache.html#module-linecache" rel="nofollow noreferrer"><code>linecache</code></a> module allows one to get any line from a Python source file, while attempting to optimize internally, using a cache, the common case where many lines are read from a single file. This is used by the <a href="https://docs.python.org/3/library/traceback.html#module-traceback" rel="nofollow noreferrer"><code>traceback</code></a> module to retrieve source lines for inclusion in the formatted traceback...</p>\u000a</blockquote>\u000a
p165
sVquestion_id
p166
I620367
sVlast_activity_date
p167
I1475263732
sVcreation_date
p168
I1236373086
sVscore
p169
I20
sVowner
p170
(dp171
Vuser_id
p172
I69572
sVprofile_image
p173
Vhttps://www.gravatar.com/avatar/f57fd943275b7c3629852963590828b2?s=128&d=identicon&r=PG
p174
sVuser_type
p175
Vregistered
p176
sVreputation
p177
I8659
sVlink
p178
Vhttp://stackoverflow.com/users/69572/john-ellinwood
p179
sVaccept_rate
p180
I70
sVdisplay_name
p181
VJohn Ellinwood
p182
ssVis_accepted
p183
I01
sVlast_edit_date
p184
I1475263732
sVanswer_id
p185
I620397
sa(dp186
Vbody
p187
V<p><strong>Edit:</strong> Please see quornian's answer to this question, which is better than mine and should be the accepted answer.</p>\u000a\u000a<p>According to the <a href="http://docs.python.org/library/argparse.html" rel="noreferrer">argparse documentation</a> the result of <code>parser.parse_args(...)</code> will "only contain attributes for the main parser and the sub parser that was selected". Unfortunately this may not be enough information to determine which sub parser was used. The documentation recommends using the <a href="http://docs.python.org/library/argparse.html#argparse.ArgumentParser.set_defaults" rel="noreferrer"><code>set_defaults(...)</code></a> method on the sub parser to solve this problem.</p>\u000a\u000a<p>For example, I've added calls to <code>set_defaults()</code> to your code:</p>\u000a\u000a<pre><code>import argparse\u000a\u000aparser = argparse.ArgumentParser( version='pyargparsetest 1.0' )\u000asubparsers = parser.add_subparsers(help='commands')\u000a\u000a# all\u000aall_parser = subparsers.add_parser('all', help='process all apps')\u000aall_parser.set_defaults(which='all')\u000a\u000a# app\u000aapp_parser = subparsers.add_parser('app', help='process a single app')\u000aapp_parser.add_argument('appname', action='store', help='name of app to process')\u000aapp_parser.set_defaults(which='app')\u000a</code></pre>\u000a\u000a<p>Now if you run</p>\u000a\u000a<pre><code>print parser.parse_args(["all"])\u000a</code></pre>\u000a\u000a<p>The result is</p>\u000a\u000a<pre><code>Namespace(which='all')\u000a</code></pre>\u000a\u000a<p>Check out the <a href="http://docs.python.org/library/argparse.html#argparse.ArgumentParser.add_subparsers" rel="noreferrer"><code>add_subparsers()</code></a> documentation for more information and another example.</p>\u000a
p188
sVquestion_id
p189
I8250010
sVlast_activity_date
p190
I1473723131
sVcreation_date
p191
I1322088524
sVscore
p192
I50
sVowner
p193
(dp194
Vuser_id
p195
I631586
sVprofile_image
p196
Vhttps://www.gravatar.com/avatar/47a4a177ca77dc75837720ca43b1d4d8?s=128&d=identicon&r=PG
p197
sVuser_type
p198
Vregistered
p199
sVreputation
p200
I11282
sVlink
p201
Vhttp://stackoverflow.com/users/631586/srgerg
p202
sVdisplay_name
p203
Vsrgerg
p204
ssVis_accepted
p205
I01
sVlast_edit_date
p206
I1473723131
sVanswer_id
p207
I8250143
sa(dp208
Vbody
p209
V<p>There is exactly one reason why the following is prefered:</p>\u000a\u000a<pre><code>with open('filename.txt') as fp:\u000a    for line in fp:\u000a        print line\u000a</code></pre>\u000a\u000a<p>We are all spoiled by CPython's relatively deterministic reference-counting scheme for garbage collection.  Other, hypothetical implementations of Python will not necessarily close the file "quickly enough" without the <code>with</code> block if they use some other scheme to reclaim memory.</p>\u000a\u000a<p>In such an implementation, you might get a "too many files open" error from the OS if your code opens files faster than the garbage collector calls finalizers on orphaned file handles.  The usual workaround is to trigger the GC immediately, but this is a nasty hack and it has to be done by <strong>every</strong> function that could encounter the error, including those in libraries.  What a nightmare.</p>\u000a\u000a<p>Or you could just use the <code>with</code> block.</p>\u000a\u000a<h2>Bonus Question</h2>\u000a\u000a<p>(Stop reading now if are only interested in the objective aspects of the question.)</p>\u000a\u000a<blockquote>\u000a  <p>Why isn't that included in the iterator protocol for file objects?</p>\u000a</blockquote>\u000a\u000a<p>This is a subjective question about API design, so I have a subjective answer in two parts.</p>\u000a\u000a<p>On a gut level, this feels wrong, because it makes iterator protocol do two separate things\u2014iterate over lines <em>and</em> close the file handle\u2014and it's often a bad idea to make a simple-looking function do two actions.  In this case, it feels especially bad because iterators relate in a quasi-functional, value-based way to the contents of a file, but managing file handles is a completely separate task.  Squashing both, invisibly, into one action, is surprising to humans who read the code and makes it more difficult to reason about program behavior.</p>\u000a\u000a<p>Other languages have essentially come to the same conclusion.  Haskell briefly flirted with so-called "lazy IO" which allows you to iterate over a file and have it automatically closed when you get to the end of the stream, but it's almost universally discouraged to use lazy IO in Haskell these days, and Haskell users have mostly moved to more explicit resource management like Conduit which behaves more like the <code>with</code> block in Python.</p>\u000a\u000a<p>On a technical level, there are some things you may want to do with a file handle in Python which would not work as well if iteration closed the file handle.  For example, suppose I need to iterate over the file twice:</p>\u000a\u000a<pre><code>with open('filename.txt') as fp:\u000a    for line in fp:\u000a        ...\u000a    fp.seek(0)\u000a    for line in fp:\u000a        ...\u000a</code></pre>\u000a\u000a<p>While this is a less common use case, consider the fact that I might have just added the three lines of code at the bottom to an existing code base which originally had the top three lines.  If iteration closed the file, I wouldn't be able to do that.  So keeping iteration and resource management separate makes it easier to compose chunks of code into a larger, working Python program.</p>\u000a\u000a<p>Composability is one of the most important usability features of a language or API.</p>\u000a
p210
sVquestion_id
p211
I11555468
sVlast_activity_date
p212
I1468729474
sVcreation_date
p213
I1342681308
sVscore
p214
I135
sVowner
p215
(dp216
Vuser_id
p217
I82294
sVprofile_image
p218
Vhttps://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG
p219
sVuser_type
p220
Vregistered
p221
sVreputation
p222
I124718
sVlink
p223
Vhttp://stackoverflow.com/users/82294/dietrich-epp
p224
sVaccept_rate
p225
I67
sVdisplay_name
p226
VDietrich Epp
p227
ssVis_accepted
p228
I01
sVlast_edit_date
p229
I1468729474
sVanswer_id
p230
I11555509
sa(dp231
Vbody
p232
V<p><code>django.conf.urls.defaults</code> <a href="https://docs.djangoproject.com/en/dev/internals/deprecation/#deprecation-removed-in-1-6" rel="noreferrer">has been removed in Django 1.6</a>. If the problem was in your own code, you would fix it by changing the import to</p>\u000a\u000a<pre><code>from django.conf.urls import patterns, url, include\u000a</code></pre>\u000a\u000a<p>However, in your case the problem is in a third party app, graphite. The issue <a href="https://github.com/graphite-project/graphite-web/commit/fc3f018544c19b90cc63797d18970a4cc27ef2ad#diff-e383725a971fca0685db19bfe7c65b32" rel="noreferrer">has been fixed</a> in graphite's master branch and version 0.9.14+.</p>\u000a
p233
sVquestion_id
p234
I19962736
sVlast_activity_date
p235
I1463135383
sVcreation_date
p236
I1384371502
sVscore
p237
I175
sVowner
p238
(dp239
Vuser_id
p240
I113962
sVprofile_image
p241
Vhttps://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG
p242
sVuser_type
p243
Vregistered
p244
sVreputation
p245
I112517
sVlink
p246
Vhttp://stackoverflow.com/users/113962/alasdair
p247
sVaccept_rate
p248
I87
sVdisplay_name
p249
VAlasdair
p250
ssVis_accepted
p251
I01
sVlast_edit_date
p252
I1463135383
sVanswer_id
p253
I19962822
sa(dp254
Vbody
p255
V<p>You may be interested in this: <a href="http://www.python.org/doc/essays/list2str/" rel="noreferrer">An optimization anecdote</a> by Guido.  Although it is worth remembering also that this is an old article and it predates the existence of things like <code>''.join</code> (although I guess <code>string.joinfields</code> is more-or-less the same)</p>\u000a\u000a<p>On the strength of that, the <code>array</code> module <em>may</em> be fastest if you can shoehorn your problem into it.  But <code>''.join</code> is probably <em>fast enough</em> and has the benefit of being idiomatic and thus easier for other python programmers to understand.</p>\u000a\u000a<p>Finally, the golden rule of optimization: don't optimize unless you know you need to, and measure rather than guessing.</p>\u000a\u000a<p>You can measure different methods using the <code>timeit</code> module. That can <em>tell</em> you which is fastest, instead of random strangers on the internet making guesses.</p>\u000a
p256
sVquestion_id
p257
I1316887
sVlast_activity_date
p258
I1462950245
sVcreation_date
p259
I1250972819
sVscore
p260
I79
sVowner
p261
(dp262
Vuser_id
p263
I15154
sVprofile_image
p264
Vhttps://www.gravatar.com/avatar/cdca0dc45085388c1b753104ce4c8648?s=128&d=identicon&r=PG
p265
sVuser_type
p266
Vregistered
p267
sVreputation
p268
I24695
sVlink
p269
Vhttp://stackoverflow.com/users/15154/john-fouhy
p270
sVaccept_rate
p271
I88
sVdisplay_name
p272
VJohn Fouhy
p273
ssVis_accepted
p274
I01
sVlast_edit_date
p275
I1462950245
sVanswer_id
p276
I1316959
sa(dp277
Vbody
p278
V<p>Not currently, currently the only languages available to access the iPhone SDK are C/C++, Objective C and Swift.</p>\u000a\u000a<p>There is no technical reason why this could not change in the future but I wouldn't hold your breath for this happening in the short term.</p>\u000a\u000a<p>That said, Objective-C and Swift really are not too scary...</p>\u000a\u000a<blockquote>\u000a  <h1>2016 edit</h1>\u000a  \u000a  <p>Javascript with NativeScript framework is available to use now.</p>\u000a</blockquote>\u000a
p279
sVquestion_id
p280
I43315
sVlast_activity_date
p281
I1462481047
sVcreation_date
p282
I1220516491
sVscore
p283
I32
sVowner
p284
(dp285
Vuser_id
p286
I4496
sVprofile_image
p287
Vhttps://www.gravatar.com/avatar/07e80e95e01f577c15e2fc50bb5f328a?s=128&d=identicon&r=PG
p288
sVuser_type
p289
Vregistered
p290
sVreputation
p291
I4662
sVlink
p292
Vhttp://stackoverflow.com/users/4496/dave-verwer
p293
sVaccept_rate
p294
I100
sVdisplay_name
p295
VDave Verwer
p296
ssVis_accepted
p297
I01
sVlast_edit_date
p298
I1462481047
sVanswer_id
p299
I43331
sa(dp300
Vbody
p301
V<p>Ok i managed to solve it without threads (any suggestions why using threads would be better are appreciated) by using a snippet from this question <a href="http://stackoverflow.com/questions/527197/intercepting-stdout-of-a-subprocess-while-it-is-running">Intercepting stdout of a subprocess while it is running</a></p>\u000a\u000a<pre><code>def execute(command):\u000a    process = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\u000a\u000a    # Poll process for new output until finished\u000a    while True:\u000a        nextline = process.stdout.readline()\u000a        if nextline == '' and process.poll() is not None:\u000a            break\u000a        sys.stdout.write(nextline)\u000a        sys.stdout.flush()\u000a\u000a    output = process.communicate()[0]\u000a    exitCode = process.returncode\u000a\u000a    if (exitCode == 0):\u000a        return output\u000a    else:\u000a        raise ProcessException(command, exitCode, output)\u000a</code></pre>\u000a
p302
sVquestion_id
p303
I4417546
sVlast_activity_date
p304
I1461663625
sVcreation_date
p305
I1292091401
sVscore
p306
I54
sVowner
p307
(dp308
Vuser_id
p309
I319905
sVprofile_image
p310
Vhttps://www.gravatar.com/avatar/f93326f7ee4c9d10bce766d45a024038?s=128&d=identicon&r=PG
p311
sVuser_type
p312
Vregistered
p313
sVreputation
p314
I7455
sVlink
p315
Vhttp://stackoverflow.com/users/319905/ifischer
p316
sVaccept_rate
p317
I85
sVdisplay_name
p318
Vifischer
p319
ssVis_accepted
p320
I01
sVlast_edit_date
p321
I1461663625
sVanswer_id
p322
I4418193
sa(dp323
Vbody
p324
V<p>This only makes sense with <strong><a href="http://en.wikipedia.org/wiki/NumPy">NumPy</a> arrays</strong>. The behavior with lists is useless, and specific to Python 2 (not Python 3). You may want to double-check if the original object was indeed a NumPy array (see further below) and not a list.</p>\u000a\u000a<p>But in your code here, x is a simple list.</p>\u000a\u000a<p>Since</p>\u000a\u000a<pre><code>x &lt; 2\u000a</code></pre>\u000a\u000a<p>is False\u000ai.e 0, therefore</p>\u000a\u000a<p><code>x[x&lt;2]</code> is <code>x[0]</code></p>\u000a\u000a<p><code>x[0]</code> gets changed.</p>\u000a\u000a<p>Conversely, <code>x[x&gt;2]</code> is <code>x[True]</code> or <code>x[1]</code></p>\u000a\u000a<p>So, <code>x[1]</code> gets changed.</p>\u000a\u000a<p><strong>Why does this happen?</strong></p>\u000a\u000a<p>The rules for comparison are:</p>\u000a\u000a<ol>\u000a<li><p>When you order two strings or two numeric types the ordering is done in the expected way (lexicographic ordering for string, numeric ordering for integers).</p></li>\u000a<li><p>When you order a numeric and a non-numeric type, the numeric type comes first.</p></li>\u000a<li><p>When you order two incompatible types where neither is numeric, they are ordered by the alphabetical order of their typenames:</p></li>\u000a</ol>\u000a\u000a<p>So, we have the following order</p>\u000a\u000a<p>numeric &lt; list &lt; string &lt; tuple</p>\u000a\u000a<p>See the accepted answer for <em><a href="http://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int">How does Python compare string and int?</a></em>.</p>\u000a\u000a<p><strong>If x is a NumPy array</strong>, then the syntax makes more sense because of <strong>boolean array indexing</strong>. In that case, <code>x &lt; 2</code> isn't a boolean at all; it's an array of booleans representing whether each element of <code>x</code> was less than 2. <code>x[x &lt; 2] = 0</code> then selects the elements of <code>x</code> that were less than 2 and sets those cells to 0. See <em><a href="http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html">Indexing</a></em>.</p>\u000a\u000a<pre><code>&gt;&gt;&gt; x = np.array([1., -1., -2., 3])\u000a&gt;&gt;&gt; x &lt; 0\u000aarray([False,  True,  True, False], dtype=bool)\u000a&gt;&gt;&gt; x[x &lt; 0] += 20   # All elements &lt; 0 get increased by 20\u000a&gt;&gt;&gt; x\u000aarray([  1.,  19.,  18.,   3.]) # Only elements &lt; 0 are affected\u000a</code></pre>\u000a
p325
sVquestion_id
p326
I36603042
sVlast_activity_date
p327
I1460660638
sVcreation_date
p328
I1460561874
sVscore
p329
I113
sVowner
p330
(dp331
Vuser_id
p332
I1077327
sVprofile_image
p333
Vhttps://www.gravatar.com/avatar/e25358e6f25dd8a264744b7faeb9b01a?s=128&d=identicon&r=PG&f=1
p334
sVuser_type
p335
Vregistered
p336
sVreputation
p337
I1478
sVlink
p338
Vhttp://stackoverflow.com/users/1077327/trans1st0r
p339
sVaccept_rate
p340
I92
sVdisplay_name
p341
Vtrans1st0r
p342
ssVis_accepted
p343
I01
sVlast_edit_date
p344
I1460660638
sVanswer_id
p345
I36603274
sa(dp346
Vbody
p347
V<p>There is no <em>special</em> reason. Python is simply applying its general principle of not performing implicit conversions, which are well-known causes of problems, particularly for newcomers, in languages such as Perl and Javascript.</p>\u000a\u000a<p><code>int(some_string)</code> is an explicit request to convert a string to integer format; the rules for this conversion specify that the string must contain a valid integer literal representation. <code>int(float)</code> is an explicit request to convert a float to an integer; the rules for this conversion specify that the float's fractional portion will be truncated.</p>\u000a\u000a<p>In order for <code>int("3.1459")</code> to return <code>3</code> the interpreter would have to implicitly convert the string to a float. Since Python doesn't support implicit conversions, it chooses to raise an exception instead.</p>\u000a
p348
sVquestion_id
p349
I36085185
sVlast_activity_date
p350
I1458672679
sVcreation_date
p351
I1458307611
sVscore
p352
I123
sVowner
p353
(dp354
Vuser_id
p355
I146073
sVprofile_image
p356
Vhttps://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG
p357
sVuser_type
p358
Vregistered
p359
sVreputation
p360
I11250
sVlink
p361
Vhttp://stackoverflow.com/users/146073/holdenweb
p362
sVaccept_rate
p363
I71
sVdisplay_name
p364
Vholdenweb
p365
ssVis_accepted
p366
I01
sVlast_edit_date
p367
I1458672679
sVanswer_id
p368
I36085637
sa(dp369
Vbody
p370
V<blockquote>\u000a  <p>So that I can basically ask it to get me the content/text in the div tag with class='container' contained within the body tag, Or something similar.</p>\u000a</blockquote>\u000a\u000a<pre><code>try: \u000a    from BeautifulSoup import BeautifulSoup\u000aexcept ImportError:\u000a    from bs4 import BeautifulSoup\u000ahtml = #the HTML code you've written above\u000aparsed_html = BeautifulSoup(html)\u000aprint parsed_html.body.find('div', attrs={'class':'container'}).text\u000a</code></pre>\u000a\u000a<p>You don't need performance descriptions I guess - just read how BeautifulSoup works. Look at its <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noreferrer">official documentation</a>.</p>\u000a
p371
sVquestion_id
p372
I11709079
sVlast_activity_date
p373
I1457107282
sVcreation_date
p374
I1343563935
sVscore
p375
I98
sVowner
p376
(dp377
Vuser_id
p378
I1303697
sVprofile_image
p379
Vhttps://www.gravatar.com/avatar/590ba44a43d61e5fa4501197c24b423d?s=128&d=identicon&r=PG
p380
sVuser_type
p381
Vregistered
p382
sVreputation
p383
I1781
sVlink
p384
Vhttp://stackoverflow.com/users/1303697/aadaam
p385
sVdisplay_name
p386
VAadaam
p387
ssVis_accepted
p388
I01
sVlast_edit_date
p389
I1457107282
sVanswer_id
p390
I11709155
sa(dp391
Vbody
p392
V<p><a href="http://www.json.org/" rel="noreferrer">JSON</a> notation has only a handful of native datatypes (objects, arrays, strings, numbers, booleans, and null), so anything serialized in JSON needs to be expressed as one of these types.</p>\u000a\u000a<p>As shown in the <a href="http://docs.python.org/library/json.html#" rel="noreferrer">json module docs</a>, this conversion can be done automatically by a <em>JSONEncoder</em> and <em>JSONDecoder</em>, but then you would be giving up some other structure you might need (if you convert sets to a list, then you lose the ability to recover regular lists; if you convert sets to a dictionary using <code>dict.fromkeys(s)</code> then you lose the ability to recover dictionaries).</p>\u000a\u000a<p>A more sophisticated solution is to build-out a custom type that can coexist with other native JSON types.  This lets you store nested structures that include lists, sets, dicts, decimals, datetime objects, etc.:</p>\u000a\u000a<pre><code>from json import dumps, loads, JSONEncoder, JSONDecoder\u000aimport pickle\u000a\u000aclass PythonObjectEncoder(JSONEncoder):\u000a    def default(self, obj):\u000a        if isinstance(obj, (list, dict, str, unicode, int, float, bool, type(None))):\u000a            return JSONEncoder.default(self, obj)\u000a        return {'_python_object': pickle.dumps(obj)}\u000a\u000adef as_python_object(dct):\u000a    if '_python_object' in dct:\u000a        return pickle.loads(str(dct['_python_object']))\u000a    return dct\u000a</code></pre>\u000a\u000a<p>Here is a sample session showing that it can handle lists, dicts, and sets:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; data = [1,2,3, set(['knights', 'who', 'say', 'ni']), {'key':'value'}, Decimal('3.14')]\u000a\u000a&gt;&gt;&gt; j = dumps(data, cls=PythonObjectEncoder)\u000a\u000a&gt;&gt;&gt; loads(j, object_hook=as_python_object)\u000a[1, 2, 3, set(['knights', 'say', 'who', 'ni']), {u'key': u'value'}, Decimal('3.14')]\u000a</code></pre>\u000a\u000a<p>Alternatively, it may be useful to use a more general purpose serialization technique such as <a href="http://yaml.org/" rel="noreferrer">YAML</a>, <a href="http://twistedmatrix.com/documents/8.1.0/api/twisted.spread.jelly.html" rel="noreferrer">Twisted Jelly</a>, or Python's <a href="http://docs.python.org/library/pickle.html#module-pickle" rel="noreferrer">pickle module</a>.  These each support a much greater range of datatypes.</p>\u000a
p393
sVquestion_id
p394
I8230315
sVlast_activity_date
p395
I1456903334
sVcreation_date
p396
I1321980092
sVscore
p397
I73
sVowner
p398
(dp399
Vuser_id
p400
I1001643
sVprofile_image
p401
Vhttps://www.gravatar.com/avatar/60cac87fb9e2b5689242622999656cb0?s=128&d=identicon&r=PG
p402
sVuser_type
p403
Vregistered
p404
sVreputation
p405
I94640
sVlink
p406
Vhttp://stackoverflow.com/users/1001643/raymond-hettinger
p407
sVaccept_rate
p408
I75
sVdisplay_name
p409
VRaymond Hettinger
p410
ssVis_accepted
p411
I01
sVlast_edit_date
p412
I1456903334
sVanswer_id
p413
I8230373
sa(dp414
Vbody
p415
V<p>I finally found the solution:</p>\u000a\u000a<pre><code>mypath = customerbulk.objects.get(pk=1).fileup.path\u000ao = open(mypath,'rU')\u000amydata = csv.reader(o)\u000a</code></pre>\u000a
p416
sVquestion_id
p417
I6726953
sVlast_activity_date
p418
I1454691062
sVcreation_date
p419
I1311025311
sVscore
p420
I135
sVowner
p421
(dp422
Vuser_id
p423
I552821
sVprofile_image
p424
Vhttps://i.stack.imgur.com/JXlA0.jpg?s=128&g=1
p425
sVuser_type
p426
Vregistered
p427
sVreputation
p428
I1908
sVlink
p429
Vhttp://stackoverflow.com/users/552821/mohd
p430
sVaccept_rate
p431
I50
sVdisplay_name
p432
Vmohd
p433
ssVis_accepted
p434
I01
sVlast_edit_date
p435
I1454691062
sVanswer_id
p436
I6739807
sa(dp437
Vbody
p438
V<p>Have you tried:</p>\u000a\u000a<pre><code>result = db.engine.execute("&lt;sql here&gt;")\u000a</code></pre>\u000a\u000a<p>or:</p>\u000a\u000a<pre><code>from sqlalchemy import text\u000a\u000asql = text('select name from penguins')\u000aresult = db.engine.execute(sql)\u000anames = []\u000afor row in result:\u000a    names.append(row[0])\u000a\u000aprint names\u000a</code></pre>\u000a
p439
sVquestion_id
p440
I17972020
sVlast_activity_date
p441
I1452513911
sVcreation_date
p442
I1375342371
sVscore
p443
I129
sVowner
p444
(dp445
Vuser_id
p446
I904393
sVprofile_image
p447
Vhttps://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG
p448
sVuser_type
p449
Vregistered
p450
sVreputation
p451
I33058
sVlink
p452
Vhttp://stackoverflow.com/users/904393/miguel
p453
sVdisplay_name
p454
VMiguel
p455
ssVis_accepted
p456
I01
sVlast_edit_date
p457
I1452513911
sVanswer_id
p458
I17987782
sa(dp459
Vbody
p460
V<p><a href="http://docs.python.org/library/os.path.html#os.path.commonprefix" rel="noreferrer">os.path.commonprefix()</a> and <a href="http://docs.python.org/library/os.path.html#os.path.relpath" rel="noreferrer">os.path.relpath()</a> are your friends:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; print os.path.commonprefix(['/usr/var/log', '/usr/var/security'])\u000a'/usr/var'\u000a&gt;&gt;&gt; print os.path.commonprefix(['/tmp', '/usr/var'])  # No common prefix: the root is the common prefix\u000a'/'\u000a</code></pre>\u000a\u000a<p>You can thus test whether the common prefix is one of the paths, i.e. if one of the paths is a common ancestor:</p>\u000a\u000a<pre><code>paths = [\u2026, \u2026, \u2026]\u000acommon_prefix = os.path.commonprefix(list_of_paths)\u000aif common_prefix in paths:\u000a    \u2026\u000a</code></pre>\u000a\u000a<p>You can then find the relative paths:</p>\u000a\u000a<pre><code>relative_paths = [os.path.relpath(path, common_prefix) for path in paths]\u000a</code></pre>\u000a\u000a<p>You can even handle more than two paths, with this method, and test whether all the paths are all below one of them.</p>\u000a\u000a<p><strong>PS</strong>: depending on how your paths look like, you might want to perform some normalization first (this is useful in situations where one does not know whether they always end with '/' or not, or if some of the paths are relative).  Relevant functions include <a href="http://docs.python.org/library/os.path.html#os.path.abspath" rel="noreferrer">os.path.abspath()</a> and <a href="http://docs.python.org/library/os.path.html#os.path.normpath" rel="noreferrer">os.path.normpath()</a>.</p>\u000a\u000a<p><strong>PPS</strong>: as Peter Briggs mentioned in the comments, the simple approach described above can fail:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; os.path.commonprefix(['/usr/var', '/usr/var2/log'])\u000a'/usr/var'\u000a</code></pre>\u000a\u000a<p>even though <code>/usr/var</code> is <em>not</em> a common prefix of the paths.  Forcing all paths to end with '/' before calling <code>commonprefix()</code> solves this (specific) problem.</p>\u000a\u000a<p><strong>PPPS</strong>: as bluenote10 mentioned, adding a slash does not solve the general problem. Here is his followup question: <a href="http://stackoverflow.com/questions/21498939/how-to-circumvent-the-fallacy-of-pythons-os-path-commonprefix">How to circumvent the fallacy of Python&#39;s os.path.commonprefix?</a></p>\u000a\u000a<p><strong>PPPPS</strong>: starting with Python 3.4, we have <a href="https://docs.python.org/3/library/pathlib.html#" rel="noreferrer">pathlib</a>, a module that provides a saner path manipulation environment. I guess that the common prefix of a set of paths can be obtained by getting all the prefixes of each path (with <a href="https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.parents" rel="noreferrer"><code>PurePath.parents()</code></a>), taking the intersection of all these parent sets, and selecting the longest common prefix.</p>\u000a\u000a<p><strong>PPPPPS</strong>: Python 3.5 introduced a proper solution to this question: <a href="https://docs.python.org/3/library/os.path.html#os.path.commonpath" rel="noreferrer"><code>os.path.commonpath()</code></a>, which returns a valid path.</p>\u000a
p461
sVquestion_id
p462
I7287996
sVlast_activity_date
p463
I1452361438
sVcreation_date
p464
I1314989661
sVscore
p465
I106
sVowner
p466
(dp467
Vuser_id
p468
I42973
sVprofile_image
p469
Vhttps://www.gravatar.com/avatar/e1e331c88fcddfe245f4be299389270d?s=128&d=identicon&r=PG
p470
sVuser_type
p471
Vregistered
p472
sVreputation
p473
I43633
sVlink
p474
Vhttp://stackoverflow.com/users/42973/eol
p475
sVaccept_rate
p476
I87
sVdisplay_name
p477
VEOL
p478
ssVis_accepted
p479
I01
sVlast_edit_date
p480
I1452361438
sVanswer_id
p481
I7288019
sa(dp482
Vbody
p483
V<p><strong>Note:</strong> This answer is sort of outdated (from 2008). Please use the solution below with care!!</p>\u000a\u000a<hr>\u000a\u000a<p>Here is a page that details the problem and a solution (search the page for the text <em>Wrapping sys.stdout into an instance</em>):</p>\u000a\u000a<p><a href="http://wiki.python.org/moin/PrintFails" rel="noreferrer">PrintFails - Python Wiki</a></p>\u000a\u000a<p>Here's a code excerpt from that page:</p>\u000a\u000a<pre><code>$ python -c 'import sys, codecs, locale; print sys.stdout.encoding; \u005c\u000a    sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout); \u005c\u000a    line = u"\u005cu0411\u005cn"; print type(line), len(line); \u005c\u000a    sys.stdout.write(line); print line'\u000a  UTF-8\u000a  &lt;type 'unicode'&gt; 2\u000a  \u0411\u000a  \u0411\u000a\u000a  $ python -c 'import sys, codecs, locale; print sys.stdout.encoding; \u005c\u000a    sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout); \u005c\u000a    line = u"\u005cu0411\u005cn"; print type(line), len(line); \u005c\u000a    sys.stdout.write(line); print line' | cat\u000a  None\u000a  &lt;type 'unicode'&gt; 2\u000a  \u0411\u000a  \u0411\u000a</code></pre>\u000a\u000a<p>There's some more information on that page, well worth a read.</p>\u000a
p484
sVquestion_id
p485
I5419
sVlast_activity_date
p486
I1451927933
sVcreation_date
p487
I1218148343
sVscore
p488
I26
sVowner
p489
(dp490
Vuser_id
p491
I267
sVprofile_image
p492
Vhttps://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG
p493
sVuser_type
p494
Vregistered
p495
sVreputation
p496
I240091
sVlink
p497
Vhttp://stackoverflow.com/users/267/lasse-v-karlsen
p498
sVaccept_rate
p499
I87
sVdisplay_name
p500
VLasse V. Karlsen
p501
ssVis_accepted
p502
I01
sVlast_edit_date
p503
I1451927933
sVanswer_id
p504
I5430
sa(dp505
Vbody
p506
V<p>Most of the times it is easier (and cheaper) to make the <em>first</em> iteration the special case instead of the last one:</p>\u000a\u000a<pre><code>first = True\u000afor data in data_list:\u000a    if first:\u000a        first = False\u000a    else:\u000a        between_items()\u000a\u000a    item()\u000a</code></pre>\u000a\u000a<p>This will work for any iterable, even for those that have no <code>len()</code>:</p>\u000a\u000a<pre><code>file = open('/path/to/file')\u000afor line in file:\u000a    process_line(line)\u000a\u000a    # No way of telling if this is the last line!\u000a</code></pre>\u000a\u000a<p>Apart from that, I don't think there is a generally superior solution as it depends on what you are trying to do. For example, if you are building a string from a list, it's naturally better to use <code>str.join()</code> than using a <code>for</code> loop \u201cwith special case\u201d.</p>\u000a\u000a<hr>\u000a\u000a<p>Using the same principle but more compact:</p>\u000a\u000a<pre><code>for i, line in enumerate(data_list):\u000a    if i &gt; 0:\u000a        between_items()\u000a    item()\u000a</code></pre>\u000a\u000a<p>Looks familiar, doesn't it? :)</p>\u000a\u000a<hr>\u000a\u000a<p>For @ofko, and others who really need to find out if the current value of an iterable without <code>len()</code> is the last one, you will need to look ahead:</p>\u000a\u000a<pre><code>def lookahead(iterable):\u000a    """Pass through all values from the given iterable, augmented by the\u000a    information if there are more values to come after the current one\u000a    (True), or if it is the last value (False).\u000a    """\u000a    # Get an iterator and pull the first value.\u000a    it = iter(iterable)\u000a    last = next(it)\u000a    # Run the iterator to exhaustion (starting from the second value).\u000a    for val in it:\u000a        # Report the *previous* value (more to come).\u000a        yield last, True\u000a        last = val\u000a    # Report the last value.\u000a    yield last, False\u000a</code></pre>\u000a\u000a<p>Then you can use it like this:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; for i, has_more in lookahead(range(3)):\u000a...     print(i, has_more)\u000a0 True\u000a1 True\u000a2 False\u000a</code></pre>\u000a
p507
sVquestion_id
p508
I1630320
sVlast_activity_date
p509
I1449435606
sVcreation_date
p510
I1256644948
sVscore
p511
I74
sVowner
p512
(dp513
Vuser_id
p514
I34855
sVprofile_image
p515
Vhttps://www.gravatar.com/avatar/5a1bd79c7364ca280ec9016ffbe41d65?s=128&d=identicon&r=PG
p516
sVuser_type
p517
Vregistered
p518
sVreputation
p519
I40386
sVlink
p520
Vhttp://stackoverflow.com/users/34855/ferdinand-beyer
p521
sVdisplay_name
p522
VFerdinand Beyer
p523
ssVis_accepted
p524
I01
sVlast_edit_date
p525
I1449435606
sVanswer_id
p526
I1630350
sa(dp527
Vbody
p528
V<p>This is what I use:</p>\u000a\u000a<pre><code>def shellquote(s):\u000a    return "'" + s.replace("'", "'\u005c\u005c''") + "'"\u000a</code></pre>\u000a\u000a<p>The shell will always accept a quoted filename and remove the surrounding quotes before passing it to the program in question. Notably, this avoids problems with filenames that contain spaces or any other kind of nasty shell metacharacter.</p>\u000a\u000a<p><strong>Update</strong>: If you are using Python 3.3 or later, use <a href="http://docs.python.org/dev/library/shlex.html#shlex.quote" rel="noreferrer">shlex.quote</a> instead of rolling your own.</p>\u000a
p529
sVquestion_id
p530
I35817
sVlast_activity_date
p531
I1448911515
sVcreation_date
p532
I1220091191
sVscore
p533
I53
sVowner
p534
(dp535
Vuser_id
p536
I893
sVprofile_image
p537
Vhttps://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG
p538
sVuser_type
p539
Vregistered
p540
sVreputation
p541
I552714
sVlink
p542
Vhttp://stackoverflow.com/users/893/greg-hewgill
p543
sVaccept_rate
p544
I85
sVdisplay_name
p545
VGreg Hewgill
p546
ssVis_accepted
p547
I01
sVlast_edit_date
p548
I1448911515
sVanswer_id
p549
I35857
sa(dp550
Vbody
p551
V<h2>Python2</h2>\u000a\u000a<p>To check if import can find something in python2, using <code>imp</code></p>\u000a\u000a<pre><code>import imp\u000atry:\u000a    imp.find_module('eggs')\u000a    found = True\u000aexcept ImportError:\u000a    found = False\u000a</code></pre>\u000a\u000a<p>To find dotted imports, you need to do more:</p>\u000a\u000a<pre><code>import imp\u000atry:\u000a    spam_info = imp.find_module('spam')\u000a    spam = imp.load_module('spam', *spam_info)\u000a    imp.find_module('eggs', spam.__path__) # __path__ is already a list\u000a    found = True\u000aexcept ImportError:\u000a    found = False\u000a</code></pre>\u000a\u000a<p>You can also use <code>pkgutil.find_loader</code> (more or less the same as the python3 part</p>\u000a\u000a<pre><code>import pkgutil\u000aeggs_loader = pkgutil.find_loader('eggs')\u000afound = eggs_loader is not None\u000a</code></pre>\u000a\u000a<h2>Python3</h2>\u000a\u000a<h3>Python3 &lt;= 3.3</h3>\u000a\u000a<p>You should use <code>importlib</code>, How I went about doing this was:</p>\u000a\u000a<pre><code>import importlib\u000aspam_loader = importlib.find_loader('spam')\u000afound = spam_loader is not None\u000a</code></pre>\u000a\u000a<p>My expectation being, if you can find a loader for it, then it exists.  You can also be a bit more smart about it, like filtering out what loaders you will accept.  For example</p>\u000a\u000a<pre><code>import importlib\u000aspam_loader = importlib.find_loader('spam')\u000a# only accept it as valid if there is a source file for the module - no bytecode only.\u000afound = issubclass(type(spam_loader), importlib.machinery.SourceFileLoader)\u000a</code></pre>\u000a\u000a<h3>Python3 >= 3.4</h3>\u000a\u000a<p>In Python3.4 <code>importlib.find_loader</code> <a href="https://docs.python.org/3/library/importlib.html#importlib.find_loader" rel="noreferrer">python docs</a> was deprecated in favour of <code>importlib.util.find_spec</code>. Really, you need to choose any concrete\u000aimplementation, recomended is the <code>importlib.util.find_spec</code> one.  There\u000aare others like <code>importlib.machinery.FileFinder</code>, which is useful\u000aif you're after a specific file to load.  Figuring out how to use\u000athem is beyond the scope of this.</p>\u000a\u000a<pre><code>import importlib\u000aspam_spec = importlib.util.find_spec("spam")\u000afound = spam_spec is not None\u000a</code></pre>\u000a\u000a<p>This also works with relative imports but you must supply the starting\u000apackage, so you could also do:</p>\u000a\u000a<pre><code>import importlib\u000aspam_spec = importlib.util.find_spec("..spam", package="eggs.bar")\u000afound = spam_spec is not None\u000aspam_spec.name == "eggs.spam"\u000a</code></pre>\u000a\u000a<p>While I'm sure there exists a reason for doing this - I'm not sure what it would be.</p>\u000a\u000a<h3>WARNING</h3>\u000a\u000a<p>When trying to find a submodule, it will import\u000athe parent module (for <em>all</em> of the above methods)!</p>\u000a\u000a<pre><code>food\u005c\u000a|- __init__.py\u000a\u005c- eggs.py\u000a\u000a## __init__.py\u000aprint("module food loaded")\u000a\u000a## eggs.py\u000aprint("module eggs")\u000a\u000awere you then to run\u000a&gt;&gt;&gt; import importlib\u000a&gt;&gt;&gt; spam_spec = importlib.find_spec("food.eggs")\u000amodule food loaded\u000aModuleSpec(name='food.eggs', loader=&lt;_frozen_importlib.SourceFileLoader object at 0x10221df28&gt;, origin='/home/user/food/eggs.py')\u000a</code></pre>\u000a\u000a<p><em>comments welcome on getting around this</em></p>\u000a\u000a<h2>Acknowledgements</h2>\u000a\u000a<ul>\u000a<li>@rvighne for importlib</li>\u000a<li>@lucas-guido for python3.3+ depricating <code>find_loader</code></li>\u000a<li>@enpenax for pkgutils.find_loader behaviour in python2.7</li>\u000a</ul>\u000a
p552
sVquestion_id
p553
I14050281
sVlast_activity_date
p554
I1448325636
sVcreation_date
p555
I1356589042
sVscore
p556
I103
sVowner
p557
(dp558
Vuser_id
p559
I1224926
sVprofile_image
p560
Vhttps://www.gravatar.com/avatar/1c30eeeb9ca936e41496b366739aa7b6?s=128&d=identicon&r=PG
p561
sVuser_type
p562
Vregistered
p563
sVreputation
p564
I2129
sVlink
p565
Vhttp://stackoverflow.com/users/1224926/yarbelk
p566
sVaccept_rate
p567
I68
sVdisplay_name
p568
Vyarbelk
p569
ssVis_accepted
p570
I01
sVlast_edit_date
p571
I1448325636
sVanswer_id
p572
I14050282
sa(dp573
Vbody
p574
V<p>A more simple solution just type <code>sudo fuser -k 8000/tcp</code>.\u000aThis should kill all the processes associated with port 8000.</p>\u000a\u000a<p>EDIT:</p>\u000a\u000a<p>For osx users you can use <code>sudo lsof -t -i tcp:8000 | xargs kill -9</code></p>\u000a
p575
sVquestion_id
p576
I20239232
sVlast_activity_date
p577
I1447764543
sVcreation_date
p578
I1385549591
sVscore
p579
I212
sVowner
p580
(dp581
Vuser_id
p582
I935241
sVprofile_image
p583
Vhttps://www.gravatar.com/avatar/779ea5486de745ec74b3aeca599f2f3b?s=128&d=identicon&r=PG
p584
sVuser_type
p585
Vregistered
p586
sVreputation
p587
I4171
sVlink
p588
Vhttp://stackoverflow.com/users/935241/mounir
p589
sVdisplay_name
p590
VMounir
p591
ssVis_accepted
p592
I01
sVlast_edit_date
p593
I1447764543
sVanswer_id
p594
I20240445
sa(dp595
Vbody
p596
V<p>Stupid question, but you didn't mention it, so... What is <code>DEBUG</code> set to? It won't load unless it's <code>True</code>.</p>\u000a\u000a<p>If it's still not working, try adding '127.0.0.1' to <code>INTERNAL_IPS</code> as well.</p>\u000a\u000a<p><strong>UPDATE</strong></p>\u000a\u000a<p>This is a last-ditch-effort move, you shouldn't <em>have</em> to do this, but it will clearly show if there's merely some configuration issue or whether there's some larger issue.</p>\u000a\u000a<p>Add the following to settings.py:</p>\u000a\u000a<pre><code>def show_toolbar(request):\u000a    return True\u000aSHOW_TOOLBAR_CALLBACK = show_toolbar\u000a</code></pre>\u000a\u000a<p>That will effectively remove all checks by debug toolbar to determine if it should or should not load itself; it will always just load. Only leave that in for testing purposes, if you forget and launch with it, all your visitors will get to see your debug toolbar too.</p>\u000a\u000a<p>For explicit configuration, also see the official install docs <a href="http://django-debug-toolbar.readthedocs.org/en/latest/installation.html">here</a>.</p>\u000a\u000a<p>EDIT(6/17/2015):</p>\u000a\u000a<p>Apparently the syntax for the nuclear option has changed. It's now in its own dictionary:</p>\u000a\u000a<pre><code>def show_toolbar(request):\u000a    return True\u000aDEBUG_TOOLBAR_CONFIG = {\u000a    "SHOW_TOOLBAR_CALLBACK" : show_toolbar,\u000a}\u000a</code></pre>\u000a\u000a<p>Their <a href="https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/tests/settings.py#L72">tests</a> use this dictionary.</p>\u000a
p597
sVquestion_id
p598
I10517765
sVlast_activity_date
p599
I1434549534
sVcreation_date
p600
I1336573263
sVscore
p601
I89
sVowner
p602
(dp603
Vuser_id
p604
I654031
sVprofile_image
p605
Vhttps://www.gravatar.com/avatar/9d0a45dd92ecc2cb15cdbc5f80befb15?s=128&d=identicon&r=PG
p606
sVuser_type
p607
Vregistered
p608
sVreputation
p609
I114900
sVlink
p610
Vhttp://stackoverflow.com/users/654031/chris-pratt
p611
sVaccept_rate
p612
I77
sVdisplay_name
p613
VChris Pratt
p614
ssVis_accepted
p615
I01
sVlast_edit_date
p616
I1434549534
sVanswer_id
p617
I10518040
sa(dp618
Vbody
p619
V<p>On <code>groupby</code> object, the <code>agg</code> function can take a list to <a href="http://pandas.pydata.org/pandas-docs/stable/groupby.html#applying-multiple-functions-at-once">apply several aggregation methods</a> at once. This should give you the result you need:</p>\u000a\u000a<pre><code>df[['col1', 'col2', 'col3', 'col4']].groupby(['col1', 'col2']).agg(['mean', 'count'])\u000a</code></pre>\u000a
p620
sVquestion_id
p621
I19384532
sVlast_activity_date
p622
I1431834935
sVcreation_date
p623
I1381852168
sVscore
p624
I103
sVowner
p625
(dp626
Vuser_id
p627
I624829
sVprofile_image
p628
Vhttps://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG
p629
sVuser_type
p630
Vregistered
p631
sVreputation
p632
I13164
sVlink
p633
Vhttp://stackoverflow.com/users/624829/boud
p634
sVdisplay_name
p635
VBoud
p636
ssVis_accepted
p637
I01
sVlast_edit_date
p638
I1431834935
sVanswer_id
p639
I19385591
sa(dp640
Vbody
p641
V<p>How about</p>\u000a\u000a<pre><code>map(list, zip(*l))\u000a--&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]\u000a</code></pre>\u000a\u000a<p>For python 3.X users do </p>\u000a\u000a<pre><code>list(map(list, zip(*l)))\u000a</code></pre>\u000a
p642
sVquestion_id
p643
I6473679
sVlast_activity_date
p644
I1430006475
sVcreation_date
p645
I1308949177
sVscore
p646
I119
sVowner
p647
(dp648
Vuser_id
p649
I184088
sVprofile_image
p650
Vhttps://www.gravatar.com/avatar/6538604d39b7f425b030bc1d69d512df?s=128&d=identicon&r=PG
p651
sVuser_type
p652
Vregistered
p653
sVreputation
p654
I2826
sVlink
p655
Vhttp://stackoverflow.com/users/184088/jena
p656
sVaccept_rate
p657
I100
sVdisplay_name
p658
Vjena
p659
ssVis_accepted
p660
I01
sVlast_edit_date
p661
I1430006475
sVanswer_id
p662
I6473724
sa(dp663
Vbody
p664
V<p>From <a href="http://perldoc.perl.org/perlrun.html">perlrun</a>,</p>\u000a\u000a<blockquote>\u000a  <p>If the <code>#!</code> line does not contain the word "perl" nor the word "indir" the program named after the <code>#!</code> is executed instead of the Perl interpreter. This is slightly bizarre, but it helps people on machines that don't do <code>#!</code> , because they can tell a program that their SHELL is <em>/usr/bin/perl</em>, and Perl will then dispatch the program to the correct interpreter for them.</p>\u000a</blockquote>\u000a\u000a<p>For example,</p>\u000a\u000a<pre><code>$ cat &gt;a\u000a#!/bin/cat\u000ameow\u000a\u000a$ perl a\u000a#!/bin/cat\u000ameow\u000a</code></pre>\u000a
p665
sVquestion_id
p666
I29563832
sVlast_activity_date
p667
I1428676454
sVcreation_date
p668
I1428675908
sVscore
p669
I111
sVowner
p670
(dp671
Vuser_id
p672
I589924
sVprofile_image
p673
Vhttps://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG
p674
sVuser_type
p675
Vregistered
p676
sVreputation
p677
I222431
sVlink
p678
Vhttp://stackoverflow.com/users/589924/ikegami
p679
sVaccept_rate
p680
I100
sVdisplay_name
p681
Vikegami
p682
ssVis_accepted
p683
I01
sVlast_edit_date
p684
I1428676454
sVanswer_id
p685
I29563961
sa(dp686
Vbody
p687
V<p>From <a href="http://fabric-docs.readthedocs.org/en/stable/usage/execution.html#failure-handling" rel="noreferrer">the docs</a>:</p>\u000a\u000a<blockquote>\u000a  <p>... Fabric defaults to a \u201cfail-fast\u201d behavior pattern: if anything goes wrong, such as a remote program returning a nonzero return value or your fabfile\u2019s Python code encountering an exception, execution will halt immediately.</p>\u000a  \u000a  <p>This is typically the desired behavior, but there are many exceptions to the rule, so Fabric provides env.warn_only, a Boolean setting. It defaults to False, meaning an error condition will result in the program aborting immediately. However, if env.warn_only is set to True at the time of failure \u2013 with, say, the settings context manager \u2013 Fabric will emit a warning message but continue executing.</p>\u000a</blockquote>\u000a\u000a<p>Looks like you can exercise fine-grained control over where errors are ignored by using the <a href="http://docs.fabfile.org/en/latest/api/core/context_managers.html#fabric.context_managers.settings" rel="noreferrer"><code>settings</code> context manager</a>, something like so:</p>\u000a\u000a<pre><code>sudo('mkdir tmp') # can't fail\u000awith settings(warn_only=True):\u000a    sudo('touch tmp/test') # can fail\u000asudo('rm tmp') # can't fail\u000a</code></pre>\u000a
p688
sVquestion_id
p689
I3876936
sVlast_activity_date
p690
I1428509252
sVcreation_date
p691
I1286403293
sVscore
p692
I130
sVowner
p693
(dp694
Vuser_id
p695
I151221
sVprofile_image
p696
Vhttps://www.gravatar.com/avatar/cf3135c258d42f857b0c7d0ff9e26858?s=128&d=identicon&r=PG
p697
sVuser_type
p698
Vregistered
p699
sVreputation
p700
I10426
sVlink
p701
Vhttp://stackoverflow.com/users/151221/will-mccutchen
p702
sVaccept_rate
p703
I90
sVdisplay_name
p704
VWill McCutchen
p705
ssVis_accepted
p706
I01
sVlast_edit_date
p707
I1428509252
sVanswer_id
p708
I3877312
sa(dp709
Vbody
p710
V<p>I <a href="http://www.google.nl/search?q=python+silence+Deprecationwarning" rel="noreferrer">Googled</a> and <a href="https://docs.python.org/3/library/warnings.html" rel="noreferrer">found</a>:</p>\u000a\u000a<pre><code> #!/usr/bin/env python -W ignore::DeprecationWarning\u000a</code></pre>\u000a\u000a<p>If you're on Windows: pass <code>-W ignore::DeprecationWarning</code> as an argument to Python.</p>\u000a\u000a<p>(But resolving the issue may be a better course of action... casting to <a href="http://docs.python.org/3.0/library/functions.html#int" rel="noreferrer">int</a> is not hard.)</p>\u000a\u000a<p><strong>Edit:</strong> user <a href="https://stackoverflow.com/users/341255/shahensha">shahensha</a> pointed out that the link this answer original pointed to was broken. Changed the link to just point to the documentation. Note that as for version 2.7 and 3.2 deprecation warnings are ignored by default.</p>\u000a
p711
sVquestion_id
p712
I879173
sVlast_activity_date
p713
I1426325235
sVcreation_date
p714
I1242672607
sVscore
p715
I74
sVowner
p716
(dp717
Vuser_id
p718
I74939
sVprofile_image
p719
Vhttps://www.gravatar.com/avatar/05cc371af855f1b67886051cff4af8d4?s=128&d=identicon&r=PG
p720
sVuser_type
p721
Vregistered
p722
sVreputation
p723
I39795
sVlink
p724
Vhttp://stackoverflow.com/users/74939/stephan202
p725
sVdisplay_name
p726
VStephan202
p727
ssVis_accepted
p728
I01
sVlast_edit_date
p729
I1426325235
sVanswer_id
p730
I879208
sa(dp731
Vbody
p732
V<p><strong>Please note <a href="http://stackoverflow.com/a/7517430/190597">Craig McDaniel's solution</a> is clearly better.</strong></p>\u000a\u000a<hr>\u000a\u000a<p>logging.Formatter's <code>formatTime</code> method looks like this:</p>\u000a\u000a<pre><code>def formatTime(self, record, datefmt=None):\u000a    ct = self.converter(record.created)\u000a    if datefmt:\u000a        s = time.strftime(datefmt, ct)\u000a    else:\u000a        t = time.strftime("%Y-%m-%d %H:%M:%S", ct)\u000a        s = "%s,%03d" % (t, record.msecs)\u000a    return s\u000a</code></pre>\u000a\u000a<p>Notice the comma in <code>"%s,%03d"</code>. This can not be fixed by specifying a <code>datefmt</code> because <code>ct</code> is a <code>time.struct_time</code> and these objects do not record milliseconds. </p>\u000a\u000a<p>If we change the definition of <code>ct</code> to make it a <code>datetime</code> object instead of a <code>struct_time</code>, then (at least with modern versions of Python) we can call <code>ct.strftime</code> and then we can use <code>%f</code> to format microseconds:</p>\u000a\u000a<pre><code>import logging\u000aimport datetime as dt\u000a\u000aclass MyFormatter(logging.Formatter):\u000a    converter=dt.datetime.fromtimestamp\u000a    def formatTime(self, record, datefmt=None):\u000a        ct = self.converter(record.created)\u000a        if datefmt:\u000a            s = ct.strftime(datefmt)\u000a        else:\u000a            t = ct.strftime("%Y-%m-%d %H:%M:%S")\u000a            s = "%s,%03d" % (t, record.msecs)\u000a        return s\u000a\u000alogger = logging.getLogger(__name__)\u000alogger.setLevel(logging.DEBUG)\u000a\u000aconsole = logging.StreamHandler()\u000alogger.addHandler(console)\u000a\u000aformatter = MyFormatter(fmt='%(asctime)s %(message)s',datefmt='%Y-%m-%d,%H:%M:%S.%f')\u000aconsole.setFormatter(formatter)\u000a\u000alogger.debug('Jackdaws love my big sphinx of quartz.')\u000a# 2011-06-09,07:12:36.553554 Jackdaws love my big sphinx of quartz.\u000a</code></pre>\u000a\u000a<hr>\u000a\u000a<p>Or, to get milliseconds, change the comma to a decimal point, and omit the <code>datefmt</code> argument:</p>\u000a\u000a<pre><code>class MyFormatter(logging.Formatter):\u000a    converter=dt.datetime.fromtimestamp\u000a    def formatTime(self, record, datefmt=None):\u000a        ct = self.converter(record.created)\u000a        if datefmt:\u000a            s = ct.strftime(datefmt)\u000a        else:\u000a            t = ct.strftime("%Y-%m-%d %H:%M:%S")\u000a            s = "%s.%03d" % (t, record.msecs)\u000a        return s\u000a\u000a...\u000aformatter = MyFormatter(fmt='%(asctime)s %(message)s')\u000a...\u000alogger.debug('Jackdaws love my big sphinx of quartz.')\u000a# 2011-06-09 08:14:38.343 Jackdaws love my big sphinx of quartz.\u000a</code></pre>\u000a
p733
sVquestion_id
p734
I6290739
sVlast_activity_date
p735
I1424872949
sVcreation_date
p736
I1307612878
sVscore
p737
I38
sVowner
p738
(dp739
Vuser_id
p740
I190597
sVprofile_image
p741
Vhttps://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1
p742
sVuser_type
p743
Vregistered
p744
sVreputation
p745
I425294
sVlink
p746
Vhttp://stackoverflow.com/users/190597/unutbu
p747
sVaccept_rate
p748
I88
sVdisplay_name
p749
Vunutbu
p750
ssVis_accepted
p751
I01
sVlast_edit_date
p752
I1424872949
sVanswer_id
p753
I6290946
sa(dp754
Vbody
p755
V<p>We use django on our appengine instances mostly when we have to serve actual websites to the user. It has a great template engine, url routing and all the request/response/error handling built in. So even while we can't use the magic orm/admin stuff it has a lot going for it.</p>\u000a\u000a<p>For api services we built something very simple on top of <a href="http://webob.org/" rel="nofollow noreferrer"><code>webob</code></a>. It's far more lightweight because it doesn't need everything that django offers, and therefore a little quicker in some situations.</p>\u000a
p756
sVquestion_id
p757
I1934914
sVlast_activity_date
p758
I1424295715
sVcreation_date
p759
I1261311989
sVscore
p760
I19
sVowner
p761
(dp762
Vuser_id
p763
I56495
sVprofile_image
p764
Vhttps://graph.facebook.com/1559930481/picture?type=large
p765
sVuser_type
p766
Vregistered
p767
sVreputation
p768
I1906
sVlink
p769
Vhttp://stackoverflow.com/users/56495/koen-bok
p770
sVaccept_rate
p771
I83
sVdisplay_name
p772
VKoen Bok
p773
ssVis_accepted
p774
I01
sVlast_edit_date
p775
I1424295715
sVanswer_id
p776
I1935686
sa(dp777
Vbody
p778
V<p>There are several alternative tools for converting Matlab code to Python code (not tested yet):</p>\u000a\u000a<ul>\u000a<li><a href="https://github.com/victorlei/smop">Small Matlab to Python compiler</a>: convert Matlab code to Python code, also developed here: <a href="http://chiselapp.com/user/victorlei/repository/smop-dev/home">SMOP@chiselapp</a></li>\u000a<li><a href="https://sourceforge.net/projects/libermate/">LiberMate</a>: translate from Matlab to Python and SciPy. <a href="https://github.com/awesomebytes/libermate">Github repo</a>.</li>\u000a<li><a href="http://ompc.juricap.com/">OMPC</a>: Matlab to Python (a bit outdated)</li>\u000a<li><a href="https://sourceforge.net/projects/mat2py/?source=navbar">Matlab to Python conversion</a>: No download files available</li>\u000a</ul>\u000a\u000a<p>Also, for those interested in an interface between the two languages and <em>not</em> conversion:</p>\u000a\u000a<ul>\u000a<li><a href="https://pypi.python.org/pypi/pymatlab"><code>pymatlab</code></a>: communicate from Python by sending data to the MATLAB workspace, operating on them with scripts and pulling back the resulting data</li>\u000a<li><a href="https://code.google.com/p/python-matlab-wormholes/">Python-Matlab wormholes</a>: both directions of interaction supported</li>\u000a<li><a href="https://github.com/arokem/python-matlab-bridge">Python-Matlab bridge</a>: use Matlab from within Python, offers matlab_magic for iPython, to execute normal matlab code from within ipython</li>\u000a<li><a href="https://sourceforge.net/projects/pymat/">PyMat</a>: Control Matlab session from Python</li>\u000a<li><a href="http://code.google.com/p/pymat2/"><code>pymat2</code></a>: continuation of the appearingly abandoned PyMat.</li>\u000a<li><a href="http://mlabwrap.sourceforge.net/"><code>mlabwrap</code></a>, <a href="https://github.com/cpbotha/mlabwrap-purepy">mlabwrap-purepy</a>: make Matlab look like Python library (based on PyMat)</li>\u000a<li><a href="https://pypi.python.org/pypi/oct2py"><code>oct2py</code></a>: run GNU Octave commands from within Python</li>\u000a<li><a href="http://vader.cse.lehigh.edu/~perkins/pymex.html"><code>pymex</code></a>: Embeds the Python Interpreter in Matlab, also on <a href="http://www.mathworks.com/matlabcentral/fileexchange/27255">File Exchange</a></li>\u000a<li><a href="https://bitbucket.org/glglgl/matpy"><code>matpy</code></a>: Access MATLAB in various ways: create variables, access .mat files, direct interface to MATLAB engine (requires MATLAB be installed).</li>\u000a<li><a href="http://sourceforge.net/projects/matpy/">MatPy</a>: Python package for numerical linear algebra and plotting with a MatLab-like interface</li>\u000a</ul>\u000a\u000a<p>Btw might be helpful to look here for other migration tips:</p>\u000a\u000a<ul>\u000a<li><a href="http://bci2000.org/downloads/BCPy2000/Migration.html">http://bci2000.org/downloads/BCPy2000/Migration.html</a></li>\u000a</ul>\u000a\u000a<p>On a different note, though I'm not a <code>fortran</code> fan at all, for people who might find it useful there is:</p>\u000a\u000a<ul>\u000a<li><a href="https://github.com/elmanuelito/matlab2fortran"><code>matlab2fortran</code></a></li>\u000a</ul>\u000a
p779
sVquestion_id
p780
I9845292
sVlast_activity_date
p781
I1422971458
sVcreation_date
p782
I1373316350
sVscore
p783
I89
sVowner
p784
(dp785
Vuser_id
p786
I1959808
sVprofile_image
p787
Vhttps://www.gravatar.com/avatar/ceb43847f22c68d62a94b495690bd5cd?s=128&d=identicon&r=PG
p788
sVuser_type
p789
Vregistered
p790
sVreputation
p791
I2959
sVlink
p792
Vhttp://stackoverflow.com/users/1959808/ioannis-filippidis
p793
sVdisplay_name
p794
VIoannis Filippidis
p795
ssVis_accepted
p796
I01
sVlast_edit_date
p797
I1422971458
sVanswer_id
p798
I17535694
sa(dp799
Vbody
p800
V<p>You can either use <a href="https://docs.python.org/2/library/itertools.html#itertools.izip_longest" rel="noreferrer"><code>itertools.izip_longest</code></a> (Python 2.6+), or you can use <code>map</code> with <code>None</code>. It is a little known <a href="https://docs.python.org/2/library/functions.html#map" rel="noreferrer">feature of <code>map</code></a> (but <code>map</code> changed in Python 3.x, so this only works in Python 2.x).</p>\u000a\u000a<pre><code>&gt;&gt;&gt; map(None, a, b, c)\u000a[('a1', 'b1', 'c1'), (None, 'b2', 'c2'), (None, 'b3', None)]\u000a</code></pre>\u000a
p801
sVquestion_id
p802
I1277278
sVlast_activity_date
p803
I1422594919
sVcreation_date
p804
I1250248244
sVscore
p805
I112
sVowner
p806
(dp807
Vuser_id
p808
I97828
sVprofile_image
p809
Vhttps://www.gravatar.com/avatar/ec468ce2d7da3ab5a194716eb1cc5ef5?s=128&d=identicon&r=PG
p810
sVuser_type
p811
Vregistered
p812
sVreputation
p813
I64017
sVlink
p814
Vhttp://stackoverflow.com/users/97828/nadia-alramli
p815
sVdisplay_name
p816
VNadia Alramli
p817
ssVis_accepted
p818
I01
sVlast_edit_date
p819
I1422594919
sVanswer_id
p820
I1277311
sa(dp821
Vbody
p822
V<p>Your <code>setup.py</code> file needs <code>setuptools</code>. Many of the Python packages use <code>distutils</code> for the distribution, but some use <code>setuptools</code>, a more complete package. <a href="http://stackoverflow.com/questions/6344076/differences-between-distribute-distutils-and-setuptools">Here</a> is a question about the differences between them.</p>\u000a\u000a<p><s>Regarding Python 3.3, you should install <a href="http://pypi.python.org/pypi/distribute" rel="noreferrer"><code>distribute</code></a> instead. It is a more recent package that works in the same way as <code>setuptools</code> (it's even called <code>setuptools</code> internally).</s></p>\u000a\u000a<p><strong>UPDATE (Oct 2014):</strong> Distribute has been merged with setuptools 0.7, so just get setuptools for both Python 2.7 and 3.x</p>\u000a\u000a<p>To install this on Debian:</p>\u000a\u000a<pre><code>sudo apt-get install python-setuptools\u000a</code></pre>\u000a\u000a<p>For Python 3.x</p>\u000a\u000a<pre><code>sudo apt-get install python3-setuptools\u000a</code></pre>\u000a
p823
sVquestion_id
p824
I14426491
sVlast_activity_date
p825
I1417445157
sVcreation_date
p826
I1358699271
sVscore
p827
I149
sVowner
p828
(dp829
Vuser_id
p830
I1580351
sVprofile_image
p831
Vhttps://www.gravatar.com/avatar/e041105b6719b4c98833a23815d634b4?s=128&d=identicon&r=PG
p832
sVuser_type
p833
Vregistered
p834
sVreputation
p835
I8575
sVlink
p836
Vhttp://stackoverflow.com/users/1580351/tiago
p837
sVaccept_rate
p838
I94
sVdisplay_name
p839
Vtiago
p840
ssVis_accepted
p841
I01
sVlast_edit_date
p842
I1417445157
sVanswer_id
p843
I14426553
sa(dp844
Vbody
p845
V<p>IBM's <a href="http://site.icu-project.org/" rel="noreferrer">ICU</a> library does that (and a lot more). It has Python bindings: <a href="http://pypi.python.org/pypi/PyICU" rel="noreferrer">PyICU</a>. </p>\u000a\u000a<p><strong>Update</strong>: The core difference in sorting between ICU and <code>locale.strcoll</code> is that ICU uses the full <a href="http://unicode.org/reports/tr10/" rel="noreferrer">Unicode Collation Algorithm</a> while <code>strcoll</code> uses <a href="http://en.wikipedia.org/wiki/ISO_14651" rel="noreferrer">ISO 14651</a>.</p>\u000a\u000a<p>The differences between those two algorithms are briefly summarized here: <a href="http://unicode.org/faq/collation.html#13" rel="noreferrer">http://unicode.org/faq/collation.html#13</a>. These are rather exotic special cases, which should rarely matter in practice.</p>\u000a\u000a<pre><code>&gt;&gt;&gt; import icu # pip install PyICU\u000a&gt;&gt;&gt; sorted(['a','b','c','ä'])\u000a['a', 'b', 'c', 'ä']\u000a&gt;&gt;&gt; collator = icu.Collator.createInstance(icu.Locale('de_DE.UTF-8'))\u000a&gt;&gt;&gt; sorted(['a','b','c','ä'], key=collator.getSortKey)\u000a['a', 'ä', 'b', 'c']\u000a</code></pre>\u000a
p846
sVquestion_id
p847
I1097908
sVlast_activity_date
p848
I1413975880
sVcreation_date
p849
I1247060560
sVscore
p850
I60
sVowner
p851
(dp852
Vuser_id
p853
I12166
sVprofile_image
p854
Vhttps://www.gravatar.com/avatar/8ae44dc366eacfc7e7eede0ae0ac065c?s=128&d=identicon&r=PG
p855
sVuser_type
p856
Vregistered
p857
sVreputation
p858
I25538
sVlink
p859
Vhttp://stackoverflow.com/users/12166/rafa%c5%82-dowgird
p860
sVaccept_rate
p861
I100
sVdisplay_name
p862
VRafa\u0142 Dowgird
p863
ssVis_accepted
p864
I01
sVlast_edit_date
p865
I1413975880
sVanswer_id
p866
I1098160
sa(dp867
Vbody
p868
V<p><code>os.listdir()</code> will be slightly more efficient than using <code>glob.glob</code>.  To test if a filename is an ordinary file (and not a directory or other entity), use <code>os.path.isfile()</code>:</p>\u000a\u000a<pre><code>import os, os.path\u000a\u000a# simple version for working with CWD\u000aprint len([name for name in os.listdir('.') if os.path.isfile(name)])\u000a\u000a# path joining version for other paths\u000aDIR = '/tmp'\u000aprint len([name for name in os.listdir(DIR) if os.path.isfile(os.path.join(DIR, name))])\u000a</code></pre>\u000a
p869
sVquestion_id
p870
I2632205
sVlast_activity_date
p871
I1410818800
sVcreation_date
p872
I1271184215
sVscore
p873
I105
sVowner
p874
(dp875
Vuser_id
p876
I219162
sVprofile_image
p877
Vhttps://www.gravatar.com/avatar/4c7f016d15f498b5274e153dce3e7974?s=128&d=identicon&r=PG
p878
sVuser_type
p879
Vregistered
p880
sVreputation
p881
I37272
sVlink
p882
Vhttp://stackoverflow.com/users/219162/daniel-stutzbach
p883
sVaccept_rate
p884
I87
sVdisplay_name
p885
VDaniel Stutzbach
p886
ssVis_accepted
p887
I01
sVlast_edit_date
p888
I1410818800
sVanswer_id
p889
I2632251
sa(dp890
Vbody
p891
V<h1>sample tests:</h1>\u000a\u000a<p>tests.py:</p>\u000a\u000a<pre><code># tests.py\u000a\u000aimport random\u000atry:\u000a    import unittest2 as unittest\u000aexcept ImportError:\u000a    import unittest\u000a\u000aclass SimpleTest(unittest.TestCase):\u000a    @unittest.skip("demonstrating skipping")\u000a    def test_skipped(self):\u000a        self.fail("shouldn't happen")\u000a\u000a    def test_pass(self):\u000a        self.assertEqual(10, 7 + 3)\u000a\u000a    def test_fail(self):\u000a        self.assertEqual(11, 7 + 3)\u000a</code></pre>\u000a\u000a<h1><a href="http://pytest.org/latest/usage.html#creating-junitxml-format-files">JUnit with pytest</a></h1>\u000a\u000a<p>run the tests with:</p>\u000a\u000a<pre><code>py.test --junitxml results.xml tests.py\u000a</code></pre>\u000a\u000a<p>results.xml:</p>\u000a\u000a<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;\u000a&lt;testsuite errors="0" failures="1" name="pytest" skips="1" tests="2" time="0.097"&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_fail" time="0.000301837921143"&gt;\u000a        &lt;failure message="test failure"&gt;self = &amp;lt;tests.SimpleTest testMethod=test_fail&amp;gt;\u000a\u000a    def test_fail(self):\u000a&amp;gt;       self.assertEqual(11, 7 + 3)\u000aE       AssertionError: 11 != 10\u000a\u000atests.py:16: AssertionError&lt;/failure&gt;\u000a    &lt;/testcase&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_pass" time="0.000109910964966"/&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_skipped" time="0.000164031982422"&gt;\u000a        &lt;skipped message="demonstrating skipping" type="pytest.skip"&gt;/home/damien/test-env/lib/python2.6/site-packages/_pytest/unittest.py:119: Skipped: demonstrating skipping&lt;/skipped&gt;\u000a    &lt;/testcase&gt;\u000a&lt;/testsuite&gt;\u000a</code></pre>\u000a\u000a<h1><a href="http://nose.readthedocs.org/en/latest/plugins/xunit.html">JUnit with nose</a></h1>\u000a\u000a<p>run the tests with:</p>\u000a\u000a<pre><code>nosetests --with-xunit\u000a</code></pre>\u000a\u000a<p>nosetests.xml:</p>\u000a\u000a<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;\u000a&lt;testsuite name="nosetests" tests="3" errors="0" failures="1" skip="1"&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_fail" time="0.000"&gt;\u000a        &lt;failure type="exceptions.AssertionError" message="11 != 10"&gt;\u000a            &lt;![CDATA[Traceback (most recent call last):\u000aFile "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 340, in run\u000atestMethod()\u000aFile "/home/damien/tests.py", line 16, in test_fail\u000aself.assertEqual(11, 7 + 3)\u000aFile "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 521, in assertEqual\u000aassertion_func(first, second, msg=msg)\u000aFile "/opt/python-2.6.1/lib/python2.6/site-packages/unittest2-0.5.1-py2.6.egg/unittest2/case.py", line 514, in _baseAssertEqual\u000araise self.failureException(msg)\u000aAssertionError: 11 != 10\u000a]]&gt;\u000a        &lt;/failure&gt;\u000a    &lt;/testcase&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_pass" time="0.000"&gt;&lt;/testcase&gt;\u000a    &lt;testcase classname="tests.SimpleTest" name="test_skipped" time="0.000"&gt;\u000a        &lt;skipped type="nose.plugins.skip.SkipTest" message="demonstrating skipping"&gt;\u000a            &lt;![CDATA[SkipTest: demonstrating skipping\u000a]]&gt;\u000a        &lt;/skipped&gt;\u000a    &lt;/testcase&gt;\u000a&lt;/testsuite&gt;\u000a</code></pre>\u000a\u000a<h1><a href="http://nose2.readthedocs.org/en/latest/plugins/junitxml.html">JUnit with nose2</a></h1>\u000a\u000a<p>You would need to use the <code>nose2.plugins.junitxml</code> plugin. You can configure <code>nose2</code> with a config file like you would normally do, or with the <code>--plugin</code> command-line option.</p>\u000a\u000a<p>run the tests with:</p>\u000a\u000a<pre><code>nose2 --plugin nose2.plugins.junitxml --junit-xml tests\u000a</code></pre>\u000a\u000a<p>nose2-junit.xml:</p>\u000a\u000a<pre><code>&lt;testsuite errors="0" failures="1" name="nose2-junit" skips="1" tests="3" time="0.001"&gt;\u000a  &lt;testcase classname="tests.SimpleTest" name="test_fail" time="0.000126"&gt;\u000a    &lt;failure message="test failure"&gt;Traceback (most recent call last):\u000a  File "/Users/damien/Work/test2/tests.py", line 18, in test_fail\u000a    self.assertEqual(11, 7 + 3)\u000aAssertionError: 11 != 10\u000a&lt;/failure&gt;\u000a  &lt;/testcase&gt;\u000a  &lt;testcase classname="tests.SimpleTest" name="test_pass" time="0.000095" /&gt;\u000a  &lt;testcase classname="tests.SimpleTest" name="test_skipped" time="0.000058"&gt;\u000a    &lt;skipped /&gt;\u000a  &lt;/testcase&gt;\u000a&lt;/testsuite&gt;\u000a</code></pre>\u000a\u000a<h1><a href="https://github.com/danielfm/unittest-xml-reporting">JUnit with unittest-xml-reporting</a></h1>\u000a\u000a<p>Append the following to <code>tests.py</code></p>\u000a\u000a<pre><code>if __name__ == '__main__':\u000a    import xmlrunner\u000a    unittest.main(testRunner=xmlrunner.XMLTestRunner(output='test-reports'))\u000a</code></pre>\u000a\u000a<p>run the tests with:</p>\u000a\u000a<pre><code>python tests.py\u000a</code></pre>\u000a\u000a<p>test-reports/TEST-SimpleTest-20131001140629.xml:</p>\u000a\u000a<pre><code>&lt;?xml version="1.0" ?&gt;\u000a&lt;testsuite errors="1" failures="0" name="SimpleTest-20131001140629" tests="3" time="0.000"&gt;\u000a    &lt;testcase classname="SimpleTest" name="test_pass" time="0.000"/&gt;\u000a    &lt;testcase classname="SimpleTest" name="test_fail" time="0.000"&gt;\u000a        &lt;error message="11 != 10" type="AssertionError"&gt;\u000a&lt;![CDATA[Traceback (most recent call last):\u000a  File "tests.py", line 16, in test_fail\u000a    self.assertEqual(11, 7 + 3)\u000aAssertionError: 11 != 10\u000a]]&gt;     &lt;/error&gt;\u000a    &lt;/testcase&gt;\u000a    &lt;testcase classname="SimpleTest" name="test_skipped" time="0.000"&gt;\u000a        &lt;skipped message="demonstrating skipping" type="skip"/&gt;\u000a    &lt;/testcase&gt;\u000a    &lt;system-out&gt;\u000a&lt;![CDATA[]]&gt;    &lt;/system-out&gt;\u000a    &lt;system-err&gt;\u000a&lt;![CDATA[]]&gt;    &lt;/system-err&gt;\u000a&lt;/testsuite&gt;\u000a</code></pre>\u000a
p892
sVquestion_id
p893
I11241781
sVlast_activity_date
p894
I1407984926
sVcreation_date
p895
I1380663142
sVscore
p896
I113
sVowner
p897
(dp898
Vuser_id
p899
I1733117
sVprofile_image
p900
Vhttps://www.gravatar.com/avatar/5b886d4df174af783771e8a4dbaa4bf7?s=128&d=identicon&r=PG
p901
sVuser_type
p902
Vregistered
p903
sVreputation
p904
I15075
sVlink
p905
Vhttp://stackoverflow.com/users/1733117/dnozay
p906
sVdisplay_name
p907
Vdnozay
p908
ssVis_accepted
p909
I01
sVlast_edit_date
p910
I1407984926
sVanswer_id
p911
I19126329
sa(dp912
Vbody
p913
V<p>Here you have a working example:</p>\u000a\u000a<pre><code>import random\u000aimport numpy\u000afrom matplotlib import pyplot\u000a\u000ax = [random.gauss(3,1) for _ in range(400)]\u000ay = [random.gauss(4,2) for _ in range(400)]\u000a\u000abins = numpy.linspace(-10, 10, 100)\u000a\u000apyplot.hist(x, bins, alpha=0.5, label='x')\u000apyplot.hist(y, bins, alpha=0.5, label='y')\u000apyplot.legend(loc='upper right')\u000apyplot.show()\u000a</code></pre>\u000a\u000a<p><img src="https://i.stack.imgur.com/acUlv.png" alt="enter image description here"></p>\u000a
p914
sVquestion_id
p915
I6871201
sVlast_activity_date
p916
I1400826959
sVcreation_date
p917
I1311946424
sVscore
p918
I158
sVowner
p919
(dp920
Vuser_id
p921
I308903
sVprofile_image
p922
Vhttps://www.gravatar.com/avatar/712ac24edc67b5e789ed86dcc11ca6b9?s=128&d=identicon&r=PG
p923
sVuser_type
p924
Vregistered
p925
sVreputation
p926
I39587
sVlink
p927
Vhttp://stackoverflow.com/users/308903/joaquin
p928
sVaccept_rate
p929
I89
sVdisplay_name
p930
Vjoaquin
p931
ssVis_accepted
p932
I01
sVlast_edit_date
p933
I1400826959
sVanswer_id
p934
I6873956
sa(dp935
Vbody
p936
V<p>You may find this useful - <a href="http://eli.thegreenplace.net/2010/06/30/python-internals-adding-a-new-statement-to-python/" rel="noreferrer">Python internals: adding a new statement to Python</a>, quoted here:</p>\u000a\u000a<hr>\u000a\u000a<p>This article is an attempt to better understand how the front-end of Python works. Just reading documentation and source code may be a bit boring, so I'm taking a hands-on approach here: I'm going to add an <code>until</code> statement to Python.</p>\u000a\u000a<p>All the coding for this article was done against the cutting-edge Py3k branch in the <a href="http://code.python.org/hg/branches/py3k/" rel="noreferrer">Python Mercurial repository mirror</a>.</p>\u000a\u000a<h3>The <code>until</code> statement</h3>\u000a\u000a<p>Some languages, like Ruby, have an <code>until</code> statement, which is the complement to <code>while</code> (<code>until num == 0</code> is equivalent to <code>while num != 0</code>). In Ruby, I can write:</p>\u000a\u000a<pre><code>num = 3\u000auntil num == 0 do\u000a  puts num\u000a  num -= 1\u000aend\u000a</code></pre>\u000a\u000a<p>And it will print:</p>\u000a\u000a<pre><code>3\u000a2\u000a1\u000a</code></pre>\u000a\u000a<p>So, I want to add a similar capability to Python. That is, being able to write:</p>\u000a\u000a<pre><code>num = 3\u000auntil num == 0:\u000a  print(num)\u000a  num -= 1\u000a</code></pre>\u000a\u000a<h3>A language-advocacy digression</h3>\u000a\u000a<p>This article doesn't attempt to suggest the addition of an <code>until</code> statement to Python. Although I think such a statement would make some code clearer, and this article displays how easy it is to add, I completely respect Python's philosophy of minimalism. All I'm trying to do here, really, is gain some insight into the inner workings of Python.</p>\u000a\u000a<h3>Modifying the grammar</h3>\u000a\u000a<p>Python uses a custom parser generator named <code>pgen</code>. This is a LL(1) parser that converts Python source code into a parse tree. The input to the parser generator is the file <code>Grammar/Grammar</code><strong>[1]</strong>. This is a simple text file that specifies the grammar of Python.</p>\u000a\u000a<p><strong>[1]</strong>: From here on, references to files in the Python source are given relatively to the root of the source tree, which is the directory where you run configure and make to build Python.</p>\u000a\u000a<p>Two modifications have to be made to the grammar file. The first is to add a definition for the <code>until</code> statement. I found where the <code>while</code> statement was defined (<code>while_stmt</code>), and added <code>until_stmt</code> below <strong>[2]</strong>:</p>\u000a\u000a<pre><code>compound_stmt: if_stmt | while_stmt | until_stmt | for_stmt | try_stmt | with_stmt | funcdef | classdef | decorated\u000aif_stmt: 'if' test ':' suite ('elif' test ':' suite)* ['else' ':' suite]\u000awhile_stmt: 'while' test ':' suite ['else' ':' suite]\u000auntil_stmt: 'until' test ':' suite\u000a</code></pre>\u000a\u000a<p><strong>[2]</strong>: This demonstrates a common technique I use when modifying source code I\u2019m not familiar with: <em>work by similarity</em>. This principle won\u2019t solve all your problems, but it can definitely ease the process. Since everything that has to be done for <code>while</code> also has to be done for <code>until</code>, it serves as a pretty good guideline.</p>\u000a\u000a<p>Note that I've decided to exclude the <code>else</code> clause from my definition of <code>until</code>, just to make it a little bit different (and because frankly I dislike the <code>else</code> clause of loops and don't think it fits well with the Zen of Python).</p>\u000a\u000a<p>The second change is to modify the rule for <code>compound_stmt</code> to include <code>until_stmt</code>, as you can see in the snippet above. It's right after <code>while_stmt</code>, again.</p>\u000a\u000a<p>When you run <code>make</code> after modifying <code>Grammar/Grammar</code>, notice that the <code>pgen</code> program is run to re-generate <code>Include/graminit.h</code> and <code>Python/graminit.c</code>, and then several files get re-compiled.</p>\u000a\u000a<h3>Modifying the AST generation code</h3>\u000a\u000a<p>After the Python parser has created a parse tree, this tree is converted into an AST, since ASTs are <a href="http://eli.thegreenplace.net/2009/02/16/abstract-vs-concrete-syntax-trees/" rel="noreferrer">much simpler to work with</a> in subsequent stages of the compilation process.</p>\u000a\u000a<p>So, we're going to visit <code>Parser/Python.asdl</code> which defines the structure of Python's ASTs and add an AST node for our new <code>until</code> statement, again right below the <code>while</code>:</p>\u000a\u000a<pre><code>| While(expr test, stmt* body, stmt* orelse)\u000a| Until(expr test, stmt* body)\u000a</code></pre>\u000a\u000a<p>If you now run <code>make</code>, notice that before compiling a bunch of files, <code>Parser/asdl_c.py</code> is run to generate C code from the AST definition file. This (like <code>Grammar/Grammar</code>) is another example of the Python source-code using a mini-language (in other words, a DSL) to simplify programming. Also note that since <code>Parser/asdl_c.py</code> is a Python script, this is a kind of <a href="http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29" rel="noreferrer">bootstrapping</a> - to build Python from scratch, Python already has to be available.</p>\u000a\u000a<p>While <code>Parser/asdl_c.py</code> generated the code to manage our newly defined AST node (into the files <code>Include/Python-ast.h</code> and <code>Python/Python-ast.c</code>), we still have to write the code that converts a relevant parse-tree node into it by hand. This is done in the file <code>Python/ast.c</code>. There, a function named <code>ast_for_stmt</code> converts parse tree nodes for statements into AST nodes. Again, guided by our old friend <code>while</code>, we jump right into the big <code>switch</code> for handling compound statements and add a clause for <code>until_stmt</code>:</p>\u000a\u000a<pre><code>case while_stmt:\u000a    return ast_for_while_stmt(c, ch);\u000acase until_stmt:\u000a    return ast_for_until_stmt(c, ch);\u000a</code></pre>\u000a\u000a<p>Now we should implement <code>ast_for_until_stmt</code>. Here it is:</p>\u000a\u000a<pre><code>static stmt_ty\u000aast_for_until_stmt(struct compiling *c, const node *n)\u000a{\u000a    /* until_stmt: 'until' test ':' suite */\u000a    REQ(n, until_stmt);\u000a\u000a    if (NCH(n) == 4) {\u000a        expr_ty expression;\u000a        asdl_seq *suite_seq;\u000a\u000a        expression = ast_for_expr(c, CHILD(n, 1));\u000a        if (!expression)\u000a            return NULL;\u000a        suite_seq = ast_for_suite(c, CHILD(n, 3));\u000a        if (!suite_seq)\u000a            return NULL;\u000a        return Until(expression, suite_seq, LINENO(n), n-&gt;n_col_offset, c-&gt;c_arena);\u000a    }\u000a\u000a    PyErr_Format(PyExc_SystemError,\u000a                 "wrong number of tokens for 'until' statement: %d",\u000a                 NCH(n));\u000a    return NULL;\u000a}\u000a</code></pre>\u000a\u000a<p>Again, this was coded while closely looking at the equivalent <code>ast_for_while_stmt</code>, with the difference that for <code>until</code> I've decided not to support the <code>else</code> clause. As expected, the AST is created recursively, using other AST creating functions like <code>ast_for_expr</code> for the condition expression and <code>ast_for_suite</code> for the body of the <code>until</code> statement. Finally, a new node named <code>Until</code> is returned.</p>\u000a\u000a<p>Note that we access the parse-tree node <code>n</code> using some macros like <code>NCH</code> and <code>CHILD</code>. These are worth understanding - their code is in <code>Include/node.h</code>.</p>\u000a\u000a<h3>Digression: AST composition</h3>\u000a\u000a<p>I chose to create a new type of AST for the <code>until</code> statement, but actually this isn't necessary. I could've saved some work and implemented the new functionality using composition of existing AST nodes, since:</p>\u000a\u000a<pre><code>until condition:\u000a   # do stuff\u000a</code></pre>\u000a\u000a<p>Is functionally equivalent to:</p>\u000a\u000a<pre><code>while not condition:\u000a  # do stuff\u000a</code></pre>\u000a\u000a<p>Instead of creating the <code>Until</code> node in <code>ast_for_until_stmt</code>, I could have created a <code>Not</code> node with an <code>While</code> node as a child. Since the AST compiler already knows how to handle these nodes, the next steps of the process could be skipped.</p>\u000a\u000a<h3>Compiling ASTs into bytecode</h3>\u000a\u000a<p>The next step is compiling the AST into Python bytecode. The compilation has an intermediate result which is a CFG (Control Flow Graph), but since the same code handles it I will ignore this detail for now and leave it for another article.</p>\u000a\u000a<p>The code we will look at next is <code>Python/compile.c</code>. Following the lead of <code>while</code>, we find the function <code>compiler_visit_stmt</code>, which is responsible for compiling statements into bytecode. We add a clause for <code>Until</code>:</p>\u000a\u000a<pre><code>case While_kind:\u000a    return compiler_while(c, s);\u000acase Until_kind:\u000a    return compiler_until(c, s);\u000a</code></pre>\u000a\u000a<p>If you wonder what <code>Until_kind</code> is, it's a constant (actually a value of the <code>_stmt_kind</code> enumeration) automatically generated from the AST definition file into <code>Include/Python-ast.h</code>. Anyway, we call <code>compiler_until</code> which, of course, still doesn't exist. I'll get to it an a moment.</p>\u000a\u000a<p>If you're curious like me, you'll notice that <code>compiler_visit_stmt</code> is peculiar. No amount of <code>grep</code>-ping the source tree reveals where it is called. When this is the case, only one option remains - C macro-fu. Indeed, a short investigation leads us to the <code>VISIT</code> macro defined in <code>Python/compile.c</code>:</p>\u000a\u000a<pre><code>#define VISIT(C, TYPE, V) {\u005c\u000a    if (!compiler_visit_ ## TYPE((C), (V))) \u005c\u000a        return 0; \u005c\u000a</code></pre>\u000a\u000a<p>It's used to invoke <code>compiler_visit_stmt</code> in <code>compiler_body</code>. Back to our business, however...</p>\u000a\u000a<p>As promised, here's <code>compiler_until</code>:</p>\u000a\u000a<pre><code>static int\u000acompiler_until(struct compiler *c, stmt_ty s)\u000a{\u000a    basicblock *loop, *end, *anchor = NULL;\u000a    int constant = expr_constant(s-&gt;v.Until.test);\u000a\u000a    if (constant == 1) {\u000a        return 1;\u000a    }\u000a    loop = compiler_new_block(c);\u000a    end = compiler_new_block(c);\u000a    if (constant == -1) {\u000a        anchor = compiler_new_block(c);\u000a        if (anchor == NULL)\u000a            return 0;\u000a    }\u000a    if (loop == NULL || end == NULL)\u000a        return 0;\u000a\u000a    ADDOP_JREL(c, SETUP_LOOP, end);\u000a    compiler_use_next_block(c, loop);\u000a    if (!compiler_push_fblock(c, LOOP, loop))\u000a        return 0;\u000a    if (constant == -1) {\u000a        VISIT(c, expr, s-&gt;v.Until.test);\u000a        ADDOP_JABS(c, POP_JUMP_IF_TRUE, anchor);\u000a    }\u000a    VISIT_SEQ(c, stmt, s-&gt;v.Until.body);\u000a    ADDOP_JABS(c, JUMP_ABSOLUTE, loop);\u000a\u000a    if (constant == -1) {\u000a        compiler_use_next_block(c, anchor);\u000a        ADDOP(c, POP_BLOCK);\u000a    }\u000a    compiler_pop_fblock(c, LOOP, loop);\u000a    compiler_use_next_block(c, end);\u000a\u000a    return 1;\u000a}\u000a</code></pre>\u000a\u000a<p>I have a confession to make: this code wasn't written based on a deep understanding of Python bytecode. Like the rest of the article, it was done in imitation of the kin <code>compiler_while</code> function. By reading it carefully, however, keeping in mind that the Python VM is stack-based, and glancing into the documentation of the <code>dis</code> module, which has <a href="http://docs.python.org/py3k/library/dis.html" rel="noreferrer">a list of Python bytecodes</a> with descriptions, it's possible to understand what's going on.</p>\u000a\u000a<h3>That's it, we're done... Aren't we?</h3>\u000a\u000a<p>After making all the changes and running <code>make</code>, we can run the newly compiled Python and try our new <code>until</code> statement:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; until num == 0:\u000a...   print(num)\u000a...   num -= 1\u000a...\u000a3\u000a2\u000a1\u000a</code></pre>\u000a\u000a<p>Voila, it works! Let's see the bytecode created for the new statement by using the <code>dis</code> module as follows:</p>\u000a\u000a<pre><code>import dis\u000a\u000adef myfoo(num):\u000a    until num == 0:\u000a        print(num)\u000a        num -= 1\u000a\u000adis.dis(myfoo)\u000a</code></pre>\u000a\u000a<p>Here's the result:</p>\u000a\u000a<pre><code>4           0 SETUP_LOOP              36 (to 39)\u000a      &gt;&gt;    3 LOAD_FAST                0 (num)\u000a            6 LOAD_CONST               1 (0)\u000a            9 COMPARE_OP               2 (==)\u000a           12 POP_JUMP_IF_TRUE        38\u000a\u000a5          15 LOAD_NAME                0 (print)\u000a           18 LOAD_FAST                0 (num)\u000a           21 CALL_FUNCTION            1\u000a           24 POP_TOP\u000a\u000a6          25 LOAD_FAST                0 (num)\u000a           28 LOAD_CONST               2 (1)\u000a           31 INPLACE_SUBTRACT\u000a           32 STORE_FAST               0 (num)\u000a           35 JUMP_ABSOLUTE            3\u000a      &gt;&gt;   38 POP_BLOCK\u000a      &gt;&gt;   39 LOAD_CONST               0 (None)\u000a           42 RETURN_VALUE\u000a</code></pre>\u000a\u000a<p>The most interesting operation is number 12: if the condition is true, we jump to after the loop. This is correct semantics for <code>until</code>. If the jump isn't executed, the loop body keeps running until it jumps back to the condition at operation 35.</p>\u000a\u000a<p>Feeling good about my change, I then tried running the function (executing <code>myfoo(3)</code>) instead of showing its bytecode. The result was less than encouraging:</p>\u000a\u000a<pre><code>Traceback (most recent call last):\u000a  File "zy.py", line 9, in\u000a    myfoo(3)\u000a  File "zy.py", line 5, in myfoo\u000a    print(num)\u000aSystemError: no locals when loading 'print'\u000a</code></pre>\u000a\u000a<p>Whoa... this can't be good. So what went wrong?</p>\u000a\u000a<h3>The case of the missing symbol table</h3>\u000a\u000a<p>One of the steps the Python compiler performs when compiling the AST is create a symbol table for the code it compiles. The call to <code>PySymtable_Build</code> in <code>PyAST_Compile</code> calls into the symbol table module (<code>Python/symtable.c</code>), which walks the AST in a manner similar to the code generation functions. Having a symbol table for each scope helps the compiler figure out some key information, such as which variables are global and which are local to a scope.</p>\u000a\u000a<p>To fix the problem, we have to modify the <code>symtable_visit_stmt</code> function in <code>Python/symtable.c</code>, adding code for handling <code>until</code> statements, after the similar code for <code>while</code> statements <strong>[3]</strong>:</p>\u000a\u000a<pre><code>case While_kind:\u000a    VISIT(st, expr, s-&gt;v.While.test);\u000a    VISIT_SEQ(st, stmt, s-&gt;v.While.body);\u000a    if (s-&gt;v.While.orelse)\u000a        VISIT_SEQ(st, stmt, s-&gt;v.While.orelse);\u000a    break;\u000acase Until_kind:\u000a    VISIT(st, expr, s-&gt;v.Until.test);\u000a    VISIT_SEQ(st, stmt, s-&gt;v.Until.body);\u000a    break;\u000a</code></pre>\u000a\u000a<p><strong>[3]</strong>: By the way, without this code there\u2019s a compiler warning for <code>Python/symtable.c</code>. The compiler notices that the <code>Until_kind</code> enumeration value isn\u2019t handled in the switch statement of <code>symtable_visit_stmt</code> and complains. It\u2019s always important to check for compiler warnings!</p>\u000a\u000a<p>And now we really are done. Compiling the source after this change makes the execution of <code>myfoo(3)</code> work as expected.</p>\u000a\u000a<h3>Conclusion</h3>\u000a\u000a<p>In this article I've demonstrated how to add a new statement to Python. Albeit requiring quite a bit of tinkering in the code of the Python compiler, the change wasn't difficult to implement, because I used a similar and existing statement as a guideline.</p>\u000a\u000a<p>The Python compiler is a sophisticated chunk of software, and I don't claim being an expert in it. However, I am really interested in the internals of Python, and particularly its front-end. Therefore, I found this exercise a very useful companion to theoretical study of the compiler's principles and source code. It will serve as a base for future articles that will get deeper into the compiler.</p>\u000a\u000a<h3>References</h3>\u000a\u000a<p>I used a few excellent references for the construction of this article. Here they are, in no particular order:</p>\u000a\u000a<ul>\u000a<li><a href="http://www.python.org/dev/peps/pep-0339/" rel="noreferrer">PEP 339: Design of the CPython compiler</a> - probably the most important and comprehensive piece of <em>official</em> documentation for the Python compiler. Being very short, it painfully displays the scarcity of good documentation of the internals of Python.</li>\u000a<li>"Python Compiler Internals" - an article by Thomas Lee</li>\u000a<li>"Python: Design and Implementation" - a presentation by Guido van Rossum</li>\u000a<li>Python (2.5) Virtual Machine, A guided tour - a presentation by Peter Tröger</li>\u000a</ul>\u000a\u000a<p><a href="http://eli.thegreenplace.net/2010/06/30/python-internals-adding-a-new-statement-to-python/" rel="noreferrer">original source</a></p>\u000a
p937
sVquestion_id
p938
I214881
sVlast_activity_date
p939
I1399036061
sVcreation_date
p940
I1328164784
sVscore
p941
I93
sVowner
p942
(dp943
Vuser_id
p944
I8206
sVprofile_image
p945
Vhttps://www.gravatar.com/avatar/fc761ccaf6c0d7d977e2959f9bfebd06?s=128&d=identicon&r=PG
p946
sVuser_type
p947
Vregistered
p948
sVreputation
p949
I133054
sVlink
p950
Vhttp://stackoverflow.com/users/8206/eli-bendersky
p951
sVaccept_rate
p952
I94
sVdisplay_name
p953
VEli Bendersky
p954
ssVis_accepted
p955
I01
sVlast_edit_date
p956
I1399036061
sVanswer_id
p957
I9108164
sa(dp958
Vbody
p959
V<p>This splits the Seatblocks by space and gives each its own row.</p>\u000a\u000a<pre><code>In [43]: df\u000aOut[43]: \u000a   CustNum     CustomerName  ItemQty Item                 Seatblocks  ItemExt\u000a0    32363  McCartney, Paul        3  F04               2:218:10:4,6       60\u000a1    31316     Lennon, John       25  F01  1:13:36:1,12 1:13:37:1,13      300\u000a\u000aIn [44]: s = df['Seatblocks'].str.split(' ').apply(Series, 1).stack()\u000a\u000aIn [45]: s.index = s.index.droplevel(-1) # to line up with df's index\u000a\u000aIn [46]: s.name = 'Seatblocks' # needs a name to join\u000a\u000aIn [47]: s\u000aOut[47]: \u000a0    2:218:10:4,6\u000a1    1:13:36:1,12\u000a1    1:13:37:1,13\u000aName: Seatblocks, dtype: object\u000a\u000aIn [48]: del df['Seatblocks']\u000a\u000aIn [49]: df.join(s)\u000aOut[49]: \u000a   CustNum     CustomerName  ItemQty Item  ItemExt    Seatblocks\u000a0    32363  McCartney, Paul        3  F04       60  2:218:10:4,6\u000a1    31316     Lennon, John       25  F01      300  1:13:36:1,12\u000a1    31316     Lennon, John       25  F01      300  1:13:37:1,13\u000a</code></pre>\u000a\u000a<p>Or, to give each colon-separated string in its own column:</p>\u000a\u000a<pre><code>In [50]: df.join(s.apply(lambda x: Series(x.split(':'))))\u000aOut[50]: \u000a   CustNum     CustomerName  ItemQty Item  ItemExt  0    1   2     3\u000a0    32363  McCartney, Paul        3  F04       60  2  218  10   4,6\u000a1    31316     Lennon, John       25  F01      300  1   13  36  1,12\u000a1    31316     Lennon, John       25  F01      300  1   13  37  1,13\u000a</code></pre>\u000a\u000a<p>This is a little ugly, but maybe someone will chime in with a prettier solution.</p>\u000a
p960
sVquestion_id
p961
I17116814
sVlast_activity_date
p962
I1398437680
sVcreation_date
p963
I1371242693
sVscore
p964
I126
sVowner
p965
(dp966
Vuser_id
p967
I1221924
sVprofile_image
p968
Vhttps://www.gravatar.com/avatar/f54c6896f32653516c994bfcb12b704a?s=128&d=identicon&r=PG
p969
sVuser_type
p970
Vregistered
p971
sVreputation
p972
I13183
sVlink
p973
Vhttp://stackoverflow.com/users/1221924/dan-allan
p974
sVaccept_rate
p975
I80
sVdisplay_name
p976
VDan Allan
p977
ssVis_accepted
p978
I01
sVlast_edit_date
p979
I1398437680
sVanswer_id
p980
I17116976
sa(dp981
Vbody
p982
V<h2>From Django 1.7 onwards</h2>\u000a\u000a<p>Django has built in support for migrations - take a look at <a href="https://docs.djangoproject.com/en/dev/topics/migrations/" rel="noreferrer">the documentation</a>.</p>\u000a\u000a<h2>For Django 1.6 and earlier</h2>\u000a\u000a<p>Django doesn't support migrations out of the box. There is a pluggable app for Django that does exactly that though, and it works great. It's called <a href="http://south.aeracode.org" rel="noreferrer">South</a>.</p>\u000a
p983
sVquestion_id
p984
I1605662
sVlast_activity_date
p985
I1398317241
sVcreation_date
p986
I1256198957
sVscore
p987
I99
sVowner
p988
(dp989
Vuser_id
p990
I20972
sVprofile_image
p991
Vhttps://www.gravatar.com/avatar/dcce4266f0c054991bf5dbd29794c743?s=128&d=identicon&r=PG
p992
sVuser_type
p993
Vregistered
p994
sVreputation
p995
I65520
sVlink
p996
Vhttp://stackoverflow.com/users/20972/dominic-rodger
p997
sVaccept_rate
p998
I86
sVdisplay_name
p999
VDominic Rodger
p1000
ssVis_accepted
p1001
I01
sVlast_edit_date
p1002
I1398317241
sVanswer_id
p1003
I1605673
sa(dp1004
Vbody
p1005
V<p>You build the object <strong>before</strong> encoding it to a JSON string:</p>\u000a\u000a<pre><code>data = {}\u000adata['key'] = 'value'\u000ajson_data = json.dumps(data)\u000a</code></pre>\u000a\u000a<p>JSON is a <em>serialization</em> format, textual data <em>representing</em> a structure. It is not, itself, that structure.</p>\u000a
p1006
sVquestion_id
p1007
I23110383
sVlast_activity_date
p1008
I1397653653
sVcreation_date
p1009
I1397653653
sVscore
p1010
I187
sVowner
p1011
(dp1012
Vuser_id
p1013
I100297
sVprofile_image
p1014
Vhttps://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG
p1015
sVuser_type
p1016
Vmoderator
p1017
sVreputation
p1018
I554877
sVlink
p1019
Vhttp://stackoverflow.com/users/100297/martijn-pieters
p1020
sVdisplay_name
p1021
VMartijn Pieters
p1022
ssVis_accepted
p1023
I01
sVanswer_id
p1024
I23110401
sa(dp1025
Vbody
p1026
V<p><code>os.path</code> works in a funny way. It looks like <code>os</code> should be a package with a submodule <code>path</code>, but in reality <code>os</code> is a normal module that does magic with <code>sys.modules</code> to inject <code>os.path</code>. Here's what happens:</p>\u000a\u000a<ul>\u000a<li><p>When Python starts up, it loads a bunch of modules into <code>sys.modules</code>. They aren't bound to any names in your script, but you can access the already-created modules when you import them in some way.</p>\u000a\u000a<ul>\u000a<li><code>sys.modules</code> is a dict in which modules are cached. When you import a module, if it already has been imported somewhere, it gets the instance stored in <code>sys.modules</code>.</li>\u000a</ul></li>\u000a<li><p><code>os</code> is among the modules that are loaded when Python starts up. It assigns its <code>path</code> attribute to an os-specific path module.</p></li>\u000a<li><p>It injects <code>sys.modules['os.path'] = path</code> so that you're able to do "<code>import os.path</code>" as though it was a submodule.</p></li>\u000a</ul>\u000a\u000a<p>I tend to think of <code>os.path</code> as <em>a module I want to use</em> rather than <em>a thing in the <code>os</code> module</em>, so even though it's not <em>really</em> a submodule of a package called <code>os</code>, I import it sort of like it is one and <strong>I always do <code>import os.path</code></strong>. This is consistent with how <code>os.path</code> is documented.</p>\u000a\u000a<hr>\u000a\u000a<p>Incidentally, this sort of structure leads to a lot of Python programmers' early confusion about modules and packages and code organization, I think. This is really for two reasons</p>\u000a\u000a<ol>\u000a<li><p>If you think of <code>os</code> as a package and know that you can do <code>import os</code> and have access to the submodule <code>os.path</code>, you may be surprised later when you can't do <code>import twisted</code> and automatically access <code>twisted.spread</code> without importing it.</p></li>\u000a<li><p>It is confusing that <code>os.name</code> is a normal thing, a string, and <code>os.path</code> is a module. I always structure my packages with empty <code>__init__.py</code> files so that at the same level I always have one type of thing: a module/package or other stuff. Several big Python projects take this approach, which tends to make more structured code. </p></li>\u000a</ol>\u000a
p1027
sVquestion_id
p1028
I2724348
sVlast_activity_date
p1029
I1397509322
sVcreation_date
p1030
I1272402898
sVscore
p1031
I94
sVowner
p1032
(dp1033
Vuser_id
p1034
I192839
sVprofile_image
p1035
Vhttps://i.stack.imgur.com/GNPsv.jpg?s=128&g=1
p1036
sVuser_type
p1037
Vregistered
p1038
sVreputation
p1039
I38635
sVlink
p1040
Vhttp://stackoverflow.com/users/192839/mike-graham
p1041
sVaccept_rate
p1042
I71
sVdisplay_name
p1043
VMike Graham
p1044
ssVis_accepted
p1045
I01
sVlast_edit_date
p1046
I1397509322
sVanswer_id
p1047
I2725195
sa(dp1048
Vbody
p1049
V<p><kbd>Ctrl</kbd>+<kbd>C</kbd> terminates the main thread, but because your threads aren't in daemon mode, they keep running, and that keeps the process alive. We can make them daemons:</p>\u000a\u000a<pre><code>f = FirstThread()\u000af.daemon = True\u000af.start()\u000as = SecondThread()\u000as.daemon = True\u000as.start()\u000a</code></pre>\u000a\u000a<p>But then there's another problem - once the main thread has started your threads, there's nothing else for it to do. So it exits, and the threads are destroyed instantly. So let's keep the main thread alive:</p>\u000a\u000a<pre><code>import time\u000awhile True:\u000a    time.sleep(1)\u000a</code></pre>\u000a\u000a<p>Now it will keep print 'first' and 'second' until you hit <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>\u000a\u000a<p><strong>Edit:</strong> as commenters have pointed out, the daemon threads may not get a chance to clean up things like temporary files. If you need that, then catch the <code>KeyboardInterrupt</code> on the main thread and have it co-ordinate cleanup and shutdown. But in many cases, letting daemon threads die suddenly is probably good enough.</p>\u000a
p1050
sVquestion_id
p1051
I11815947
sVlast_activity_date
p1052
I1391245299
sVcreation_date
p1053
I1344166220
sVscore
p1054
I127
sVowner
p1055
(dp1056
Vuser_id
p1057
I434217
sVprofile_image
p1058
Vhttps://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG
p1059
sVuser_type
p1060
Vregistered
p1061
sVreputation
p1062
I25163
sVlink
p1063
Vhttp://stackoverflow.com/users/434217/thomas-k
p1064
sVaccept_rate
p1065
I100
sVdisplay_name
p1066
VThomas K
p1067
ssVis_accepted
p1068
I01
sVlast_edit_date
p1069
I1391245299
sVanswer_id
p1070
I11816038
sa(dp1071
Vbody
p1072
V<p>Roll your own. For example, just model your tree as list of list. You should detail your specific need before people can provide better recommendation.</p>\u000a\u000a<p>In response to HelloGoodbye's question, this is a sample code to iterate a tree.</p>\u000a\u000a<pre><code>def walk(node):\u000a    """ iterate tree in pre-order depth-first search order """\u000a    yield node\u000a    for child in node.children:\u000a        for n in walk(child):\u000a            yield n\u000a</code></pre>\u000a\u000a<p>One catch is this recursive implementation is O(n log n). It works fine for all trees I have to deal with. Maybe the subgenerator in Python 3 would help.</p>\u000a
p1073
sVquestion_id
p1074
I3009935
sVlast_activity_date
p1075
I1391212025
sVcreation_date
p1076
I1276118439
sVscore
p1077
I34
sVowner
p1078
(dp1079
Vuser_id
p1080
I229075
sVprofile_image
p1081
Vhttps://www.gravatar.com/avatar/d6369e8a8a3a00e79bba94ce88d22503?s=128&d=identicon&r=PG
p1082
sVuser_type
p1083
Vregistered
p1084
sVreputation
p1085
I9255
sVlink
p1086
Vhttp://stackoverflow.com/users/229075/wai-yip-tung
p1087
sVaccept_rate
p1088
I71
sVdisplay_name
p1089
VWai Yip Tung
p1090
ssVis_accepted
p1091
I01
sVlast_edit_date
p1092
I1391212025
sVanswer_id
p1093
I3010038
sa(dp1094
Vbody
p1095
V<p>What you missed here is timezones.</p>\u000a\u000a<p>Presumably you've five hours off UTC, so 2013-09-01T11:00:00 local and 2013-09-01T06:00:00Z are the same time.</p>\u000a\u000a<p>You need to read the top of the <a href="http://docs.python.org/3.3/library/datetime.html"><code>datetime</code></a> docs, which explain about timezones and "naive" and "aware" objects.</p>\u000a\u000a<p>If your original naive datetime was UTC, the way to recover it is to use <a href="http://docs.python.org/3.3/library/datetime.html#datetime.datetime.utcfromtimestamp"><code>utcfromtimestamp</code></a> instead of <code>fromtimestamp</code>.</p>\u000a\u000a<p>On the other hand, if your original naive datetime was local, you shouldn't have subtracted a UTC timestamp from it in the first place; use <code>datetime.fromtimestamp(0)</code> instead.</p>\u000a\u000a<p>Or, if you had an aware datetime object, you need to either use a local (aware) epoch on both sides, or explicitly convert to and from UTC.</p>\u000a\u000a<p>If you have, or can upgrade to, Python 3.3 or later, you can avoid all of these problems by just using the <a href="http://docs.python.org/3.3/library/datetime.html#datetime.datetime.timestamp"><code>timestamp</code></a> method instead of trying to figure out how to do it yourself. And even if you don't, you may want to consider <a href="http://hg.python.org/cpython/file/3.3/Lib/datetime.py#l1428">borrowing its source code</a>.</p>\u000a\u000a<p>(And if you can wait for Python 3.4, it looks like <a href="http://www.python.org/dev/peps/pep-0431/">PEP 341</a> is likely to make it into the final release, which means all of the stuff J.F. Sebastian and I were talking about in the comments should be doable with just the stdlib, and working the same way on both Unix and Windows.)</p>\u000a
p1096
sVquestion_id
p1097
I19801727
sVlast_activity_date
p1098
I1385148208
sVcreation_date
p1099
I1383697629
sVscore
p1100
I43
sVowner
p1101
(dp1102
Vuser_id
p1103
I908494
sVprofile_image
p1104
Vhttps://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG
p1105
sVuser_type
p1106
Vregistered
p1107
sVreputation
p1108
I178780
sVlink
p1109
Vhttp://stackoverflow.com/users/908494/abarnert
p1110
sVaccept_rate
p1111
I25
sVdisplay_name
p1112
Vabarnert
p1113
ssVis_accepted
p1114
I01
sVlast_edit_date
p1115
I1385148208
sVanswer_id
p1116
I19801806
sa(dp1117
Vbody
p1118
V<p>According to the <a href="http://svn.python.org/view/python/trunk/Objects/listobject.c?revision=69227&amp;view=markup" rel="noreferrer">source code</a>, the maximum size of a list is <code>PY_SSIZE_T_MAX/sizeof(PyObject*)</code>.</p>\u000a\u000a<p><code>PY_SSIZE_T_MAX</code> is defined in <a href="http://svn.python.org/view/python/trunk/Include/pyport.h?revision=70489&amp;view=markup" rel="noreferrer">pyport.h</a> to be <code>((size_t) -1)&gt;&gt;1</code></p>\u000a\u000a<p>On a regular 32bit system, this is (4294967295 / 2) / 4  or 536870912.</p>\u000a\u000a<p>Therefore the maximum size of a python list on a 32 bit system is <strong>536,870,912</strong> elements. </p>\u000a\u000a<p>As long as the number of elements you have is equal or below this, all list functions should operate correctly.</p>\u000a
p1119
sVquestion_id
p1120
I855191
sVlast_activity_date
p1121
I1380601521
sVcreation_date
p1122
I1242172101
sVscore
p1123
I136
sVowner
p1124
(dp1125
Vuser_id
p1126
I57757
sVprofile_image
p1127
Vhttps://www.gravatar.com/avatar/12d12320bb9a578802cfd9c8cb312e33?s=128&d=identicon&r=PG
p1128
sVuser_type
p1129
Vregistered
p1130
sVreputation
p1131
I31003
sVlink
p1132
Vhttp://stackoverflow.com/users/57757/unknown
p1133
sVaccept_rate
p1134
I79
sVdisplay_name
p1135
VUnknown
p1136
ssVis_accepted
p1137
I01
sVlast_edit_date
p1138
I1380601521
sVanswer_id
p1139
I855455
sa(dp1140
Vbody
p1141
V<p>Best practice is, in each module, to have a logger defined like this:</p>\u000a\u000a<pre><code>import logging\u000alogger = logging.getLogger(__name__)\u000a</code></pre>\u000a\u000a<p>near the top of the module, and then in other code in the module do e.g.</p>\u000a\u000a<pre><code>logger.debug('My message with %s', 'variable data')\u000a</code></pre>\u000a\u000a<p>If you need to subdivide logging activity inside a module, use e.g.</p>\u000a\u000a<pre><code>loggerA = logging.getLogger(__name__ + '.A')\u000aloggerB = logging.getLogger(__name__ + '.B')\u000a</code></pre>\u000a\u000a<p>and log to <code>loggerA</code> and <code>loggerB</code> as appropriate.</p>\u000a\u000a<p>In your main program or programs, do e.g.:</p>\u000a\u000a<pre><code>def main():\u000a    "your program code"\u000a\u000aif __name__ == '__main__':\u000a    import logging.config\u000a    logging.config.fileConfig('/path/to/logging.conf')\u000a    main()\u000a</code></pre>\u000a\u000a<p>or </p>\u000a\u000a<pre><code>def main():\u000a    import logging.config\u000a    logging.config.fileConfig('/path/to/logging.conf')\u000a    # your program code\u000a\u000aif __name__ == '__main__':\u000a    main()\u000a</code></pre>\u000a\u000a<p>See <a href="http://docs.python.org/howto/logging.html#logging-from-multiple-modules">here</a> for logging from multiple modules, and <a href="http://docs.python.org/howto/logging.html#configuring-logging-for-a-library">here</a> for logging configuration for code which will be used as a library module by other code.</p>\u000a\u000a<p><strong>Update:</strong> When calling <code>fileConfig()</code>, you may want to specify <code>disable_existing_loggers=False</code> if you're using Python 2.6 or later (see <a href="http://docs.python.org/2/library/logging.config.html#logging.config.fileConfig">the docs</a> for more information). The default value is <code>True</code> for backward compatibility, which causes all existing loggers to be disabled by <code>fileConfig()</code> unless they or their ancestor are explicitly named in the configuration. With the value set to <code>False</code>, existing loggers are left alone. If using Python 2.7/Python 3.2 or later, you may wish to consider the <code>dictConfig()</code> API which is better than <code>fileConfig()</code> as it gives more control over the configuration.</p>\u000a
p1142
sVquestion_id
p1143
I15727420
sVlast_activity_date
p1144
I1379058458
sVcreation_date
p1145
I1364767766
sVscore
p1146
I120
sVowner
p1147
(dp1148
Vuser_id
p1149
I118903
sVprofile_image
p1150
Vhttps://www.gravatar.com/avatar/7094252405dd3dd5f798b132834d39b2?s=128&d=identicon&r=PG
p1151
sVuser_type
p1152
Vregistered
p1153
sVreputation
p1154
I58523
sVlink
p1155
Vhttp://stackoverflow.com/users/118903/vinay-sajip
p1156
sVdisplay_name
p1157
VVinay Sajip
p1158
ssVis_accepted
p1159
I01
sVlast_edit_date
p1160
I1379058458
sVanswer_id
p1161
I15735146
sa(dp1162
Vbody
p1163
V<p>You can use <a href="http://docs.python.org/2/library/operator.html#operator.itemgetter"><code>operator.itemgetter</code></a>:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; from operator import itemgetter \u000a&gt;&gt;&gt; a = [-2, 1, 5, 3, 8, 5, 6]\u000a&gt;&gt;&gt; b = [1, 2, 5]\u000a&gt;&gt;&gt; print itemgetter(*b)(a)\u000a(1, 5, 5)\u000a</code></pre>\u000a\u000a<p>Or you can use <a href="http://www.numpy.org/">numpy</a>:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; import numpy as np\u000a&gt;&gt;&gt; a = np.array([-2, 1, 5, 3, 8, 5, 6])\u000a&gt;&gt;&gt; b = [1, 2, 5]\u000a&gt;&gt;&gt; print list(a[b])\u000a[1, 5, 5]\u000a</code></pre>\u000a\u000a<hr>\u000a\u000a<p>But really, your current solution is fine. It's probably the neatest out of all of them.</p>\u000a
p1164
sVquestion_id
p1165
I18272160
sVlast_activity_date
p1166
I1376652316
sVcreation_date
p1167
I1376652316
sVscore
p1168
I71
sVowner
p1169
(dp1170
Vuser_id
p1171
I1971805
sVprofile_image
p1172
Vhttps://i.stack.imgur.com/KzjmY.jpg?s=128&g=1
p1173
sVuser_type
p1174
Vregistered
p1175
sVreputation
p1176
I34272
sVlink
p1177
Vhttp://stackoverflow.com/users/1971805/terrya
p1178
sVaccept_rate
p1179
I83
sVdisplay_name
p1180
VTerryA
p1181
ssVis_accepted
p1182
I01
sVanswer_id
p1183
I18272249
sa(dp1184
Vbody
p1185
V<p>You can just get/set the index via its <code>name</code> property</p>\u000a\u000a<pre><code>In [7]: df.index.name\u000aOut[7]: 'Index Title'\u000a\u000aIn [8]: df.index.name = 'foo'\u000a\u000aIn [9]: df.index.name\u000aOut[9]: 'foo'\u000a\u000aIn [10]: df\u000aOut[10]: \u000a         Column 1\u000afoo              \u000aApples          1\u000aOranges         2\u000aPuppies         3\u000aDucks           4\u000a</code></pre>\u000a
p1186
sVquestion_id
p1187
I18022845
sVlast_activity_date
p1188
I1375466919
sVcreation_date
p1189
I1375466919
sVscore
p1190
I106
sVowner
p1191
(dp1192
Vuser_id
p1193
I644898
sVprofile_image
p1194
Vhttps://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG
p1195
sVuser_type
p1196
Vregistered
p1197
sVreputation
p1198
I55285
sVlink
p1199
Vhttp://stackoverflow.com/users/644898/jeff
p1200
sVdisplay_name
p1201
VJeff
p1202
ssVis_accepted
p1203
I01
sVanswer_id
p1204
I18023468
sa(dp1205
Vbody
p1206
V<p>Middleware may be your best bet.  I've used this piece of code in the past, modified from a snippet found elsewhere:</p>\u000a\u000a<pre><code>import re\u000a\u000afrom django.conf import settings\u000afrom django.contrib.auth.decorators import login_required\u000a\u000a\u000aclass RequireLoginMiddleware(object):\u000a    """\u000a    Middleware component that wraps the login_required decorator around\u000a    matching URL patterns. To use, add the class to MIDDLEWARE_CLASSES and\u000a    define LOGIN_REQUIRED_URLS and LOGIN_REQUIRED_URLS_EXCEPTIONS in your\u000a    settings.py. For example:\u000a    ------\u000a    LOGIN_REQUIRED_URLS = (\u000a        r'/topsecret/(.*)$',\u000a    )\u000a    LOGIN_REQUIRED_URLS_EXCEPTIONS = (\u000a        r'/topsecret/login(.*)$',\u000a        r'/topsecret/logout(.*)$',\u000a    )\u000a    ------\u000a    LOGIN_REQUIRED_URLS is where you define URL patterns; each pattern must\u000a    be a valid regex.\u000a\u000a    LOGIN_REQUIRED_URLS_EXCEPTIONS is, conversely, where you explicitly\u000a    define any exceptions (like login and logout URLs).\u000a    """\u000a    def __init__(self):\u000a        self.required = tuple(re.compile(url) for url in settings.LOGIN_REQUIRED_URLS)\u000a        self.exceptions = tuple(re.compile(url) for url in settings.LOGIN_REQUIRED_URLS_EXCEPTIONS)\u000a\u000a    def process_view(self, request, view_func, view_args, view_kwargs):\u000a        # No need to process URLs if user already logged in\u000a        if request.user.is_authenticated():\u000a            return None\u000a\u000a        # An exception match should immediately return None\u000a        for url in self.exceptions:\u000a            if url.match(request.path):\u000a                return None\u000a\u000a        # Requests matching a restricted URL pattern are returned\u000a        # wrapped with the login_required decorator\u000a        for url in self.required:\u000a            if url.match(request.path):\u000a                return login_required(view_func)(request, *view_args, **view_kwargs)\u000a\u000a        # Explicitly return None for all non-matching requests\u000a        return None\u000a</code></pre>\u000a\u000a<p>Then in settings.py, list the base URLs you want to protect:</p>\u000a\u000a<pre><code>LOGIN_REQUIRED_URLS = (\u000a    r'/private_stuff/(.*)$',\u000a    r'/login_required/(.*)$',\u000a)\u000a</code></pre>\u000a\u000a<p>As long as your site follows URL conventions for the pages requiring authentication, this model will work.  If this isn't a one-to-one fit, you may choose to modify the middleware to suit your circumstances more closely.</p>\u000a\u000a<p>What I like about this approach - besides removing the necessity of littering the codebase with <code>@login_required</code> decorators - is that if the authentication scheme changes, you have one place to go to make global changes.</p>\u000a
p1207
sVquestion_id
p1208
I2164069
sVlast_activity_date
p1209
I1374948634
sVcreation_date
p1210
I1264790000
sVscore
p1211
I82
sVowner
p1212
(dp1213
Vuser_id
p1214
I32638
sVprofile_image
p1215
Vhttps://www.gravatar.com/avatar/da7d246de681e9431fe5eb2b90786e49?s=128&d=identicon&r=PG
p1216
sVuser_type
p1217
Vregistered
p1218
sVreputation
p1219
I15341
sVlink
p1220
Vhttp://stackoverflow.com/users/32638/daniel-naab
p1221
sVaccept_rate
p1222
I56
sVdisplay_name
p1223
VDaniel Naab
p1224
ssVis_accepted
p1225
I01
sVlast_edit_date
p1226
I1374948634
sVanswer_id
p1227
I2164224
sa(dp1228
Vbody
p1229
V<p>I would do it as follows:</p>\u000a\u000a<ol>\u000a<li>Split the sentence into words, normalise them, build a dictionary</li>\u000a<li>With each word, store how many times they occurred in tweets about the company, and how many times they appeared in tweets about the fruit - these tweets must be confirmed by a human</li>\u000a<li>When a new tweet comes in, find every word in the tweet in the dictionary, calculate a weighted score - words that are used frequently in relation to the company would get a high company score, and vice versa; words used rarely, or used with both the company and the fruit, would not have much of a score.</li>\u000a</ol>\u000a
p1230
sVquestion_id
p1231
I17352469
sVlast_activity_date
p1232
I1372364942
sVcreation_date
p1233
I1372364942
sVscore
p1234
I35
sVowner
p1235
(dp1236
Vuser_id
p1237
I2514521
sVprofile_image
p1238
Vhttps://i.stack.imgur.com/ogO4d.png?s=128&g=1
p1239
sVuser_type
p1240
Vregistered
p1241
sVreputation
p1242
I3994
sVlink
p1243
Vhttp://stackoverflow.com/users/2514521/amadanon-inc
p1244
sVaccept_rate
p1245
I67
sVdisplay_name
p1246
VAMADANON Inc.
p1247
ssVis_accepted
p1248
I01
sVanswer_id
p1249
I17352583
sa(dp1250
Vbody
p1251
V<p>Hard one :-)</p>\u000a\u000a<pre><code>import email, getpass, imaplib, os\u000a\u000adetach_dir = '.' # directory where to save attachments (default: current)\u000auser = raw_input("Enter your GMail username:")\u000apwd = getpass.getpass("Enter your password: ")\u000a\u000a# connecting to the gmail imap server\u000am = imaplib.IMAP4_SSL("imap.gmail.com")\u000am.login(user,pwd)\u000am.select("[Gmail]/All Mail") # here you a can choose a mail box like INBOX instead\u000a# use m.list() to get all the mailboxes\u000a\u000aresp, items = m.search(None, "ALL") # you could filter using the IMAP rules here (check http://www.example-code.com/csharp/imap-search-critera.asp)\u000aitems = items[0].split() # getting the mails id\u000a\u000afor emailid in items:\u000a    resp, data = m.fetch(emailid, "(RFC822)") # fetching the mail, "`(RFC822)`" means "get the whole stuff", but you can ask for headers only, etc\u000a    email_body = data[0][1] # getting the mail content\u000a    mail = email.message_from_string(email_body) # parsing the mail content to get a mail object\u000a\u000a    #Check if any attachments at all\u000a    if mail.get_content_maintype() != 'multipart':\u000a        continue\u000a\u000a    print "["+mail["From"]+"] :" + mail["Subject"]\u000a\u000a    # we use walk to create a generator so we can iterate on the parts and forget about the recursive headach\u000a    for part in mail.walk():\u000a        # multipart are just containers, so we skip them\u000a        if part.get_content_maintype() == 'multipart':\u000a            continue\u000a\u000a        # is this part an attachment ?\u000a        if part.get('Content-Disposition') is None:\u000a            continue\u000a\u000a        filename = part.get_filename()\u000a        counter = 1\u000a\u000a        # if there is no filename, we create one with a counter to avoid duplicates\u000a        if not filename:\u000a            filename = 'part-%03d%s' % (counter, 'bin')\u000a            counter += 1\u000a\u000a        att_path = os.path.join(detach_dir, filename)\u000a\u000a        #Check if its already there\u000a        if not os.path.isfile(att_path) :\u000a            # finally write the stuff\u000a            fp = open(att_path, 'wb')\u000a            fp.write(part.get_payload(decode=True))\u000a            fp.close()\u000a</code></pre>\u000a\u000a<p>Wowww! That was something. ;-) But try the same in Java, just for fun!</p>\u000a\u000a<p>By the way, I tested that in a shell, so some errors likely remain.</p>\u000a\u000a<p>Enjoy</p>\u000a\u000a<p><strong>EDIT:</strong></p>\u000a\u000a<p>Because mail-box names can change from one country to another, I recommend doing <code>m.list()</code> and picking an item in it before <code>m.select("the mailbox name")</code> to avoid this error:</p>\u000a\u000a<blockquote>\u000a  <p>imaplib.error: command SEARCH illegal in state AUTH, only allowed in\u000a  states SELECTED</p>\u000a</blockquote>\u000a
p1252
sVquestion_id
p1253
I348630
sVlast_activity_date
p1254
I1362719569
sVcreation_date
p1255
I1236954884
sVscore
p1256
I146
sVowner
p1257
(dp1258
Vuser_id
p1259
I9951
sVprofile_image
p1260
Vhttps://www.gravatar.com/avatar/1449ec95d8c114dbca53136cc8194b61?s=128&d=identicon&r=PG&f=1
p1261
sVuser_type
p1262
Vregistered
p1263
sVreputation
p1264
I277993
sVlink
p1265
Vhttp://stackoverflow.com/users/9951/e-satis
p1266
sVaccept_rate
p1267
I79
sVdisplay_name
p1268
Ve-satis
p1269
ssVis_accepted
p1270
I01
sVlast_edit_date
p1271
I1362719569
sVanswer_id
p1272
I642988
sa(dp1273
Vbody
p1274
V<p>I've found that the <code>simplejson</code> module gives more descriptive errors in many cases where the built-in <code>json</code> module is vague. For instance, for the case of having a comma after the last item in a list:</p>\u000a\u000a<pre><code>json.loads('[1,2,]')\u000a....\u000aValueError: No JSON object could be decoded\u000a</code></pre>\u000a\u000a<p>which is not very descriptive. The same operation with <code>simplejson</code>:</p>\u000a\u000a<pre><code>simplejson.loads('[1,2,]')\u000a...\u000asimplejson.decoder.JSONDecodeError: Expecting object: line 1 column 5 (char 5)\u000a</code></pre>\u000a\u000a<p>Much better! Likewise for other common errors like capitalizing <code>True</code>.</p>\u000a
p1275
sVquestion_id
p1276
I14899506
sVlast_activity_date
p1277
I1361273625
sVcreation_date
p1278
I1361273625
sVscore
p1279
I107
sVowner
p1280
(dp1281
Vuser_id
p1282
I665575
sVprofile_image
p1283
Vhttps://www.gravatar.com/avatar/5b71ac3add821b6699ffe23dc7a592c1?s=128&d=identicon&r=PG
p1284
sVuser_type
p1285
Vregistered
p1286
sVreputation
p1287
I9413
sVlink
p1288
Vhttp://stackoverflow.com/users/665575/tom
p1289
sVdisplay_name
p1290
Vtom
p1291
ssVis_accepted
p1292
I01
sVanswer_id
p1293
I14956465
sa(dp1294
Vbody
p1295
V<p><a href="http://flask.pocoo.org/docs/api/#flask.Flask.run"><code>flask.Flask.run</code></a> accepts additional keyword arguments (<code>**options</code>) that it forwards to <a href="http://werkzeug.pocoo.org/docs/serving/#werkzeug.serving.run_simple"><code>werkzeug.serving.run_simple</code></a> - two of those arguments are <code>threaded</code> (which you can set to <code>True</code> to enable threading) and <code>processes</code> (which you can set to a number greater than one to have werkzeug spawn more than one process to handle requests).  So if you do:</p>\u000a\u000a<pre><code>if __name__ == '__main__':\u000a    app.run(threaded=True)\u000a    # Alternately\u000a    # app.run(processes=3)\u000a</code></pre>\u000a\u000a<p>Flask will tell Werkzeug to use threading and to spawn three processes to handle incoming requests.</p>\u000a\u000a<p>That being said, Werkzeug's <code>serving.run_simple</code> wraps the standard library's <a href="http://docs.python.org/2/library/wsgiref.html"><code>wsgiref</code></a> package - and that package contains a reference implementation of WSGI, not a production-ready web server.  If you are going to use Flask in production (assuming that "production" is not a low-traffic internal application with no more than 10 concurrent users) make sure to stand it up behind a real web server (see the section of Flask's docs entitled <a href="http://flask.pocoo.org/docs/deploying/">Deployment Options</a> for some suggested methods).</p>\u000a
p1296
sVquestion_id
p1297
I14814201
sVlast_activity_date
p1298
I1360765914
sVcreation_date
p1299
I1360632058
sVscore
p1300
I134
sVowner
p1301
(dp1302
Vuser_id
p1303
I135978
sVprofile_image
p1304
Vhttps://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG
p1305
sVuser_type
p1306
Vregistered
p1307
sVreputation
p1308
I90210
sVlink
p1309
Vhttp://stackoverflow.com/users/135978/sean-vieira
p1310
sVaccept_rate
p1311
I100
sVdisplay_name
p1312
VSean Vieira
p1313
ssVis_accepted
p1314
I01
sVlast_edit_date
p1315
I1360765914
sVanswer_id
p1316
I14823968
sa(dp1317
Vbody
p1318
V<p>Python's built-in <a href="http://docs.python.org/2/library/csv.html">CSV module</a> can handle this easily:</p>\u000a\u000a<pre><code>import csv\u000a\u000awith open("output.csv", "wb") as f:\u000a    writer = csv.writer(f)\u000a    writer.writerows(a)\u000a</code></pre>\u000a\u000a<p>This assumes your list is defined as <code>a</code>, as it is in your question. You can tweak the exact format of the output CSV via the various optional parameters to <code>csv.writer()</code> as documented in the library reference page linked above.</p>\u000a
p1319
sVquestion_id
p1320
I14037540
sVlast_activity_date
p1321
I1356514518
sVcreation_date
p1322
I1356507969
sVscore
p1323
I138
sVowner
p1324
(dp1325
Vuser_id
p1326
I148870
sVprofile_image
p1327
Vhttps://www.gravatar.com/avatar/559f9b4a76982a9c3e496e2e7686d4b1?s=128&d=identicon&r=PG
p1328
sVuser_type
p1329
Vregistered
p1330
sVreputation
p1331
I274118
sVlink
p1332
Vhttp://stackoverflow.com/users/148870/amber
p1333
sVdisplay_name
p1334
VAmber
p1335
ssVis_accepted
p1336
I01
sVlast_edit_date
p1337
I1356514518
sVanswer_id
p1338
I14037564
sa(dp1339
Vbody
p1340
V<p>I wanted to set a bounty on my question, but I have succeeded in creating solution. My problem seemed to be connected with incorrect value of <code>secret</code> key (it must be correct parameter for <code>base64.b32decode()</code> function).</p>\u000a\u000a<p>Below I post full working solution with explanation on how to use it.</p>\u000a\u000a<h2>Code</h2>\u000a\u000a<p>The following code is enough. I have also uploaded it to GitHub as separate module called <em>onetimepass</em> (available here: <a href="https://github.com/tadeck/onetimepass">https://github.com/tadeck/onetimepass</a>).</p>\u000a\u000a<pre class="lang-py prettyprint-override"><code>import hmac, base64, struct, hashlib, time\u000a\u000adef get_hotp_token(secret, intervals_no):\u000a    key = base64.b32decode(secret, True)\u000a    msg = struct.pack("&gt;Q", intervals_no)\u000a    h = hmac.new(key, msg, hashlib.sha1).digest()\u000a    o = ord(h[19]) &amp; 15\u000a    h = (struct.unpack("&gt;I", h[o:o+4])[0] &amp; 0x7fffffff) % 1000000\u000a    return h\u000a\u000adef get_totp_token(secret):\u000a    return get_hotp_token(secret, intervals_no=int(time.time())//30)\u000a</code></pre>\u000a\u000a<p>It has two functions:</p>\u000a\u000a<ul>\u000a<li><code>get_hotp_token()</code> generates one-time token (that should invalidate after single use),</li>\u000a<li><code>get_totp_token()</code> generates token based on time (changed in 30-second intervals),</li>\u000a</ul>\u000a\u000a<h2>Parameters</h2>\u000a\u000a<p>When it comes to parameters:</p>\u000a\u000a<ul>\u000a<li><code>secret</code> is a secret value known to server (the above script) and client (Google Authenticator, by providing it as password within application),</li>\u000a<li><code>intervals_no</code> is the number incremeneted after each generation of the token (this should be probably resolved on the server by checking some finite number of integers after last successful one checked in the past)</li>\u000a</ul>\u000a\u000a<h2>How to use it</h2>\u000a\u000a<ol>\u000a<li>Generate <code>secret</code> (it must be correct parameter for <code>base64.b32decode()</code>) - preferably 16-char (no <code>=</code> signs), as it surely worked for both script and Google Authenticator.</li>\u000a<li>Use <code>get_hotp_token()</code> if you want one-time passwords invalidated after each use. In Google Authenticator this type of passwords i  mentioned as based on the counter. For checking it on the server you will need to check several values of <code>intervals_no</code> (as you have no quarantee that user did not generate the pass between the requests for some reason), but not less than the last working <code>intervals_no</code> value (thus you should probably store it somewhere).</li>\u000a<li>Use <code>get_totp_token()</code>, if you want a token working in 30-second intervals. You have to make sure both systems have correct time set (meaning that they both generate the same Unix timestamp in any given moment in time).</li>\u000a<li>Make sure to protect yourself from brute-force attack. If time-based password is used, then trying 1000000 values in less than 30 seconds gives 100% chance of guessing the password. In case of HMAC-based passowrds (HOTPs) it seems to be even worse.</li>\u000a</ol>\u000a\u000a<h2>Example</h2>\u000a\u000a<p>When using the following code for one-time HMAC-based password:</p>\u000a\u000a<pre class="lang-py prettyprint-override"><code>secret = 'MZXW633PN5XW6MZX'\u000afor i in xrange(1, 10):\u000a    print i, get_hotp_token(secret, intervals_no=i)\u000a</code></pre>\u000a\u000a<p>you will get the following result:</p>\u000a\u000a<pre><code>1 448400\u000a2 656122\u000a3 457125\u000a4 35022\u000a5 401553\u000a6 581333\u000a7 16329\u000a8 529359\u000a9 171710\u000a</code></pre>\u000a\u000a<p>which is corresponding to the tokens generated by the Google Authenticator app (except if shorter than 6 signs, app adds zeros to the beginning to reach a length of 6 chars).</p>\u000a
p1341
sVquestion_id
p1342
I8529265
sVlast_activity_date
p1343
I1352767757
sVcreation_date
p1344
I1324183638
sVscore
p1345
I117
sVowner
p1346
(dp1347
Vuser_id
p1348
I548696
sVprofile_image
p1349
Vhttps://www.gravatar.com/avatar/c9b170f54e3286eea9aca961f7bfe3ef?s=128&d=identicon&r=PG
p1350
sVuser_type
p1351
Vregistered
p1352
sVreputation
p1353
I68226
sVlink
p1354
Vhttp://stackoverflow.com/users/548696/tadeck
p1355
sVaccept_rate
p1356
I90
sVdisplay_name
p1357
VTadeck
p1358
ssVis_accepted
p1359
I01
sVlast_edit_date
p1360
I1352767757
sVanswer_id
p1361
I8549884
sa(dp1362
Vbody
p1363
V<p>I know of two ways to do it.  </p>\u000a\u000a<p><strong>Method 1</strong><br>\u000aThe first method (which I prefer) is to use <a href="http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx" rel="noreferrer">msbuild</a>:</p>\u000a\u000a<pre><code>msbuild project.sln /Flags...\u000a</code></pre>\u000a\u000a<p><strong>Method 2</strong><br>\u000aYou can also run:</p>\u000a\u000a<pre><code>vcexpress project.sln /build /Flags...\u000a</code></pre>\u000a\u000a<p>The vcexpress option returns immediately and does not print any output. I suppose that might be what you want for a script.</p>\u000a\u000a<p>Note that DevEnv is not distributed with Visual Studio Express 2008 (I spent a lot of time trying to figure that out when I first had a similar issue).  </p>\u000a\u000a<p>So, the end result might be:</p>\u000a\u000a<pre><code>os.system("msbuild project.sln /p:Configuration=Debug")\u000a</code></pre>\u000a\u000a<p>You'll also want to make sure your environment variables are correct, as msbuild and vcexpress are not by default on the system path. Either start the Visual Studio build environment and run your script from there, or modify the paths in Python (with <a href="http://docs.python.org/library/os.html#os.putenv" rel="noreferrer">os.putenv</a>).</p>\u000a
p1364
sVquestion_id
p1365
I498106
sVlast_activity_date
p1366
I1342168487
sVcreation_date
p1367
I1233371050
sVscore
p1368
I81
sVowner
p1369
(dp1370
Vuser_id
p1371
I60900
sVprofile_image
p1372
Vhttps://www.gravatar.com/avatar/f1c2d3a49d031298fece4e287898940d?s=128&d=identicon&r=PG
p1373
sVuser_type
p1374
Vregistered
p1375
sVreputation
p1376
I3084
sVlink
p1377
Vhttp://stackoverflow.com/users/60900/moses-schwartz
p1378
sVdisplay_name
p1379
VMoses Schwartz
p1380
ssVis_accepted
p1381
I01
sVlast_edit_date
p1382
I1342168487
sVanswer_id
p1383
I498130
sa(dp1384
Vbody
p1385
V<p>It should just be</p>\u000a\u000a<pre><code>name[0].firstChild.nodeValue\u000a</code></pre>\u000a
p1386
sVquestion_id
p1387
I317413
sVlast_activity_date
p1388
I1339813148
sVcreation_date
p1389
I1227621553
sVscore
p1390
I111
sVowner
p1391
(dp1392
Vuser_id
p1393
I7536
sVprofile_image
p1394
Vhttps://www.gravatar.com/avatar/69aa4b5b81a1d2120c98ceed09446489?s=128&d=identicon&r=PG
p1395
sVuser_type
p1396
Vregistered
p1397
sVreputation
p1398
I25117
sVlink
p1399
Vhttp://stackoverflow.com/users/7536/eduffy
p1400
sVaccept_rate
p1401
I80
sVdisplay_name
p1402
Veduffy
p1403
ssVis_accepted
p1404
I01
sVlast_edit_date
p1405
I1339813148
sVanswer_id
p1406
I317421
sa(dp1407
Vbody
p1408
V<h1>A flat implementation</h1>\u000a\u000a<p>You could use something like this:</p>\u000a\u000a<pre><code>from sqlalchemy.ext.declarative import DeclarativeMeta\u000aclass AlchemyEncoder(json.JSONEncoder):\u000adef default(self, obj):\u000a    if isinstance(obj.__class__, DeclarativeMeta):\u000a        # an SQLAlchemy class\u000a        fields = {}\u000a        for field in [x for x in dir(obj) if not x.startswith('_') and x != 'metadata']:\u000a            data = obj.__getattribute__(field)\u000a            try:\u000a                json.dumps(data) # this will fail on non-encodable values, like other classes\u000a                fields[field] = data\u000a            except TypeError:\u000a                fields[field] = None\u000a        # a json-encodable dict\u000a        return fields\u000a\u000a    return json.JSONEncoder.default(self, obj)\u000a</code></pre>\u000a\u000a<p>and then convert to JSON using:</p>\u000a\u000a<pre><code>c = YourAlchemyClass()\u000aprint json.dumps(c, cls=AlchemyEncoder)\u000a</code></pre>\u000a\u000a<p>It will ignore fields that are not encodable (set them to 'None').</p>\u000a\u000a<p>It doesn't auto-expand relations (since this could lead to self-references, and loop forever).</p>\u000a\u000a<h1>A recursive, non-circular implementation</h1>\u000a\u000a<p>If, however, you'd rather loop forever, you could use:</p>\u000a\u000a<pre><code>from sqlalchemy.ext.declarative import DeclarativeMeta\u000a    def new_alchemy_encoder():\u000a        _visited_objs = []\u000a        class AlchemyEncoder(json.JSONEncoder):\u000a            def default(self, obj):\u000a                if isinstance(obj.__class__, DeclarativeMeta):\u000a                    # don't re-visit self\u000a                    if obj in _visited_objs:\u000a                        return None\u000a                    _visited_objs.append(obj)\u000a\u000a                    # an SQLAlchemy class\u000a                    fields = {}\u000a                    for field in [x for x in dir(obj) if not x.startswith('_') and x != 'metadata']:\u000a                        fields[field] = obj.__getattribute__(field)\u000a                    # a json-encodable dict\u000a                    return fields\u000a\u000a                return json.JSONEncoder.default(self, obj)\u000a        return AlchemyEncoder\u000a</code></pre>\u000a\u000a<p>And then encode objects using:</p>\u000a\u000a<pre><code>print json.dumps(e, cls=new_alchemy_encoder(), check_circular=False)\u000a</code></pre>\u000a\u000a<p>This would encode all children, and all their children, and all their children... Potentially encode your entire database, basically. When it reaches something its encoded before, it will encode it as 'None'.</p>\u000a\u000a<h1>A recursive, possibly-circular, selective implementation</h1>\u000a\u000a<p>Another alternative, probably better, is to be able to specify the fields you want to expand:</p>\u000a\u000a<pre><code>def new_alchemy_encoder(revisit_self = False, fields_to_expand = []):\u000a    _visited_objs = []\u000a    class AlchemyEncoder(json.JSONEncoder):\u000a        def default(self, obj):\u000a            if isinstance(obj.__class__, DeclarativeMeta):\u000a                # don't re-visit self\u000a                if revisit_self:\u000a                    if obj in _visited_objs:\u000a                        return None\u000a                    _visited_objs.append(obj)\u000a\u000a                # go through each field in this SQLalchemy class\u000a                fields = {}\u000a                for field in [x for x in dir(obj) if not x.startswith('_') and x != 'metadata']:\u000a                    val = obj.__getattribute__(field)\u000a\u000a                    # is this field another SQLalchemy object, or a list of SQLalchemy objects?\u000a                    if isinstance(val.__class__, DeclarativeMeta) or (isinstance(val, list) and len(val) &gt; 0 and isinstance(val[0].__class__, DeclarativeMeta)):\u000a                        # unless we're expanding this field, stop here\u000a                        if field not in fields_to_expand:\u000a                            # not expanding this field: set it to None and continue\u000a                            fields[field] = None\u000a                            continue\u000a\u000a                    fields[field] = val\u000a                # a json-encodable dict\u000a                return fields\u000a\u000a            return json.JSONEncoder.default(self, obj)\u000a    return AlchemyEncoder\u000a</code></pre>\u000a\u000a<p>You can now call it with:</p>\u000a\u000a<pre><code>print json.dumps(e, cls=new_alchemy_encoder(False, ['parents']), check_circular=False)\u000a</code></pre>\u000a\u000a<p>To only expand SQLAlchemy fields called 'parents', for example.</p>\u000a
p1409
sVquestion_id
p1410
I5022066
sVlast_activity_date
p1411
I1337424319
sVcreation_date
p1412
I1337421918
sVscore
p1413
I77
sVowner
p1414
(dp1415
Vuser_id
p1416
I1332819
sVprofile_image
p1417
Vhttps://www.gravatar.com/avatar/90028056d271cf7884b9815d92a5182c?s=128&d=identicon&r=PG
p1418
sVuser_type
p1419
Vregistered
p1420
sVreputation
p1421
I849
sVlink
p1422
Vhttp://stackoverflow.com/users/1332819/sasha-b
p1423
sVdisplay_name
p1424
VSasha B
p1425
ssVis_accepted
p1426
I01
sVlast_edit_date
p1427
I1337424319
sVanswer_id
p1428
I10664192
sa(dp1429
Vbody
p1430
V<p>The Pythonic way of summing an array is <code>sum</code>. For other purposes, you can sometimes use some combination of <code>reduce</code> and the <code>operator</code> module, e.g.</p>\u000a\u000a<pre><code>def product(xs):\u000a    return reduce(operator.mul, xs, 1)\u000a</code></pre>\u000a\u000a<p>Be aware that <code>reduce</code> is actually a <code>foldl</code>, in Haskell terms. There is no special syntax to perform folds, there's no builtin <code>foldr</code>, and actually using <code>reduce</code> with non-associative operators is considered bad style.</p>\u000a\u000a<p>Using higher-order functions is quite pythonic; it makes good use of Python's principle that everything is an object, including functions and classes. You are right that lambdas are frowned upon by some Pythonistas, but mostly because they tend not to be very readable when they get complex.</p>\u000a
p1431
sVquestion_id
p1432
I10366374
sVlast_activity_date
p1433
I1335639478
sVcreation_date
p1434
I1335638151
sVscore
p1435
I84
sVowner
p1436
(dp1437
Vuser_id
p1438
I166749
sVprofile_image
p1439
Vhttps://www.gravatar.com/avatar/cadb49057f720b1c1670d14bbd4567ca?s=128&d=identicon&r=PG&f=1
p1440
sVuser_type
p1441
Vregistered
p1442
sVreputation
p1443
I242543
sVlink
p1444
Vhttp://stackoverflow.com/users/166749/fred-foo
p1445
sVaccept_rate
p1446
I94
sVdisplay_name
p1447
VFred Foo
p1448
ssVis_accepted
p1449
I01
sVlast_edit_date
p1450
I1335639478
sVanswer_id
p1451
I10366417
sa(dp1452
Vbody
p1453
V<p>In <code>dict</code>s, only the keys have to be hashable, not the values. <code>namedtuple</code>s don't have keys, so hashability isn't an issue.</p>\u000a\u000a<p>However, they have a more stringent restriction -- their key-equivalents, "field names", have to be strings.</p>\u000a\u000a<p>Basically, if you were going to create a bunch of instances of a class like:</p>\u000a\u000a<pre><code>class Container:\u000a    def __init__(self, name, date, foo, bar):\u000a        self.name = name\u000a        self.date = date\u000a        self.foo = foo\u000a        self.bar = bar\u000a\u000amycontainer = Container(name, date, foo, bar)\u000a</code></pre>\u000a\u000a<p>and <strong>not change the attributes after you set them in <code>__init__</code>,</strong> you could instead use</p>\u000a\u000a<pre><code>Container = namedtuple('Container', ['name', 'date', 'foo', 'bar'])\u000a\u000amycontainer = Container(name, date, foo, bar)\u000a</code></pre>\u000a\u000a<p>as a replacement.</p>\u000a\u000a<p>Of course, you could create a bunch of <code>dict</code>s where you used the same keys in each one, but assuming you will have only valid Python identifiers as keys and don't need mutability,</p>\u000a\u000a<pre><code>mynamedtuple.fieldname\u000a</code></pre>\u000a\u000a<p>is prettier than</p>\u000a\u000a<pre><code>mydict['fieldname']\u000a</code></pre>\u000a\u000a<p>and </p>\u000a\u000a<pre><code>mynamedtuple = MyNamedTuple(firstvalue, secondvalue)\u000a</code></pre>\u000a\u000a<p>is prettier than</p>\u000a\u000a<pre><code>mydict = {'fieldname': firstvalue, 'secondfield': secondvalue}\u000a</code></pre>\u000a\u000a<p>Finally, <code>namedtuple</code>s are ordered, unlike regular <code>dict</code>s, so you get the items in the order you defined the fields, unlike a <code>dict</code>.</p>\u000a
p1454
sVquestion_id
p1455
I9872255
sVlast_activity_date
p1456
I1332766177
sVcreation_date
p1457
I1332766177
sVscore
p1458
I122
sVowner
p1459
(dp1460
Vuser_id
p1461
I500584
sVprofile_image
p1462
Vhttps://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG
p1463
sVuser_type
p1464
Vregistered
p1465
sVreputation
p1466
I82963
sVlink
p1467
Vhttp://stackoverflow.com/users/500584/agf
p1468
sVdisplay_name
p1469
Vagf
p1470
ssVis_accepted
p1471
I01
sVanswer_id
p1472
I9872434
sa(dp1473
Vbody
p1474
V<p><code>datetime.datetime.fromtimestamp()</code> is correct, except you are probably having timestamp in miliseconds (like in JavaScript), but <code>fromtimestamp()</code> expects Unix timestamp, in seconds.</p>\u000a\u000a<p>Do it like that:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; import datetime\u000a&gt;&gt;&gt; your_timestamp = 1331856000000\u000a&gt;&gt;&gt; date = datetime.datetime.fromtimestamp(your_timestamp / 1e3)\u000a</code></pre>\u000a\u000a<p>and the result is:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; date\u000adatetime.datetime(2012, 3, 16, 1, 0)\u000a</code></pre>\u000a\u000a<p>Does it answer your question?</p>\u000a\u000a<p><strong>EDIT</strong>: J.F. Sebastian correctly suggested to <strong>use true division</strong> by <code>1e3</code> (float <code>1000</code>). The difference is significant, if you would like to get precise results, thus I changed my answer. The difference results from the default behaviour of Python 2.x, which always returns <code>int</code> when dividing (using <code>/</code> operator) <code>int</code> by <code>int</code> (this is called <em>floor division</em>). By replacing the divisor <code>1000</code> (being an <code>int</code>) with the <code>1e3</code> divisor (being representation of <code>1000</code> as float) or with <code>float(1000)</code> (or <code>1000.</code> etc.), the division becomes <em>true division</em>. Python 2.x returns <code>float</code> when dividing <code>int</code> by <code>float</code>, <code>float</code> by <code>int</code>, <code>float</code> by <code>float</code> etc. And when there is some fractional part in the timestamp passed to <code>fromtimestamp()</code> method, this method's result also contains information about that fractional part (as the number of microseconds).</p>\u000a
p1475
sVquestion_id
p1476
I9744775
sVlast_activity_date
p1477
I1331935530
sVcreation_date
p1478
I1331933765
sVscore
p1479
I149
sVowner
p1480
(dp1481
Vuser_id
p1482
I548696
sVprofile_image
p1483
Vhttps://www.gravatar.com/avatar/c9b170f54e3286eea9aca961f7bfe3ef?s=128&d=identicon&r=PG
p1484
sVuser_type
p1485
Vregistered
p1486
sVreputation
p1487
I68226
sVlink
p1488
Vhttp://stackoverflow.com/users/548696/tadeck
p1489
sVaccept_rate
p1490
I90
sVdisplay_name
p1491
VTadeck
p1492
ssVis_accepted
p1493
I01
sVlast_edit_date
p1494
I1331935530
sVanswer_id
p1495
I9744811
sa(dp1496
Vbody
p1497
V<p>I eventually figured it out. Place:</p>\u000a\u000a<pre><code>import warnings\u000awarnings.filterwarnings('ignore')\u000a</code></pre>\u000a\u000a<p>inside <code>~/.ipython/profile_default/startup/disable-warnings.py</code>. I'm leaving this question and answer for the record in case anyone else comes across the same issue.</p>\u000a
p1498
sVquestion_id
p1499
I9031783
sVlast_activity_date
p1500
I1327659822
sVcreation_date
p1501
I1327659822
sVscore
p1502
I167
sVowner
p1503
(dp1504
Vuser_id
p1505
I180783
sVprofile_image
p1506
Vhttps://www.gravatar.com/avatar/f586e2a9879fe0a55fd1e3ea529c664f?s=128&d=identicon&r=PG
p1507
sVuser_type
p1508
Vregistered
p1509
sVreputation
p1510
I7031
sVlink
p1511
Vhttp://stackoverflow.com/users/180783/astrofrog
p1512
sVaccept_rate
p1513
I65
sVdisplay_name
p1514
Vastrofrog
p1515
ssVis_accepted
p1516
I01
sVanswer_id
p1517
I9031848
sa(dp1518
Vbody
p1519
V<p>If you also want <code>Ctrl-D</code> to exit without confirmation, in IPython 0.11, add <code>c.TerminalInteractiveShell.confirm_exit = False</code> to your config file.</p>\u000a\u000a<p>If you don't have a config file yet, run <code>ipython profile create</code> to create one.</p>\u000a\u000a<p>Note <a href="https://code.djangoproject.com/ticket/17078" rel="noreferrer">this ticket</a> if you're working within the Django shell.</p>\u000a
p1520
sVquestion_id
p1521
I7438112
sVlast_activity_date
p1522
I1320498314
sVcreation_date
p1523
I1320498314
sVscore
p1524
I84
sVowner
p1525
(dp1526
Vuser_id
p1527
I95357
sVprofile_image
p1528
Vhttps://www.gravatar.com/avatar/7db2313538a841b5c5137c14c705bc07?s=128&d=identicon&r=PG
p1529
sVuser_type
p1530
Vregistered
p1531
sVreputation
p1532
I3915
sVlink
p1533
Vhttp://stackoverflow.com/users/95357/tuomassalo
p1534
sVaccept_rate
p1535
I87
sVdisplay_name
p1536
Vtuomassalo
p1537
ssVis_accepted
p1538
I01
sVanswer_id
p1539
I8020342
sa(dp1540
Vbody
p1541
V<p>Very simple:</p>\u000a\u000a<pre><code>import json\u000aj = json.loads('{"one" : "1", "two" : "2", "three" : "3"}')\u000aprint j['two']\u000a</code></pre>\u000a
p1542
sVquestion_id
p1543
I7771011
sVlast_activity_date
p1544
I1318611926
sVcreation_date
p1545
I1318611926
sVscore
p1546
I178
sVowner
p1547
(dp1548
Vuser_id
p1549
I183110
sVprofile_image
p1550
Vhttps://www.gravatar.com/avatar/e56fee2230943ae9886f84233cc640b8?s=128&d=identicon&r=PG
p1551
sVuser_type
p1552
Vregistered
p1553
sVreputation
p1554
I8962
sVlink
p1555
Vhttp://stackoverflow.com/users/183110/john-giotta
p1556
sVaccept_rate
p1557
I81
sVdisplay_name
p1558
VJohn Giotta
p1559
ssVis_accepted
p1560
I01
sVanswer_id
p1561
I7771071
sa(dp1562
Vbody
p1563
V<p>Don't do it this way.</p>\u000a\u000a<p>You don't want "middleware" for a one-time startup thing.</p>\u000a\u000a<p>You want to execute code in the top-level <code>urls.py</code>.  That module is imported and executed once.</p>\u000a\u000a<p><code>urls.py</code></p>\u000a\u000a<pre><code>from django.confs.urls.defaults import *\u000afrom my_app import one_time_startup\u000a\u000aurlpatterns = ...\u000a\u000aone_time_startup()\u000a</code></pre>\u000a
p1564
sVquestion_id
p1565
I6791911
sVlast_activity_date
p1566
I1311347477
sVcreation_date
p1567
I1311347477
sVscore
p1568
I52
sVowner
p1569
(dp1570
Vuser_id
p1571
I10661
sVprofile_image
p1572
Vhttps://www.gravatar.com/avatar/c2c732bbf13dc96670b210b3c0c1ead5?s=128&d=identicon&r=PG
p1573
sVuser_type
p1574
Vregistered
p1575
sVreputation
p1576
I277525
sVlink
p1577
Vhttp://stackoverflow.com/users/10661/s-lott
p1578
sVaccept_rate
p1579
I92
sVdisplay_name
p1580
VS.Lott
p1581
ssVis_accepted
p1582
I01
sVanswer_id
p1583
I6792076
sa(dp1584
Vbody
p1585
V<pre><code>from cStringIO import StringIO\u000aimport sys\u000a\u000aold_stdout = sys.stdout\u000asys.stdout = mystdout = StringIO()\u000a\u000a# blah blah lots of code ...\u000a\u000asys.stdout = old_stdout\u000a\u000a# examine mystdout.getvalue()\u000a</code></pre>\u000a
p1586
sVquestion_id
p1587
I1218933
sVlast_activity_date
p1588
I1309556565
sVcreation_date
p1589
I1249221461
sVscore
p1590
I130
sVowner
p1591
(dp1592
Vuser_id
p1593
I14343
sVprofile_image
p1594
Vhttps://www.gravatar.com/avatar/75e9a11371cbe1566607180863efdf4c?s=128&d=identicon&r=PG
p1595
sVuser_type
p1596
Vregistered
p1597
sVreputation
p1598
I193903
sVlink
p1599
Vhttp://stackoverflow.com/users/14343/ned-batchelder
p1600
sVaccept_rate
p1601
I80
sVdisplay_name
p1602
VNed Batchelder
p1603
ssVis_accepted
p1604
I01
sVlast_edit_date
p1605
I1309556565
sVanswer_id
p1606
I1218951
sa(dp1607
Vbody
p1608
V<p>Lists themselves are thread-safe. In CPython the GIL protects against concurrent accesses to them, and other implementations take care to use a fine-grained lock or a synchronized datatype for their list implementations. However, while lists <em>themselves</em> can't go corrupt by attempts to concurrently access, the lists's <em>data</em> is not protected. For example:</p>\u000a\u000a<pre><code>L[0] += 1\u000a</code></pre>\u000a\u000a<p>is not guaranteed to actually increase L[0] by one if another thread does the same thing, because <code>+=</code> is not an atomic operation. (Very, very few operations in Python are actually atomic, because most of them can cause arbitrary Python code to be called.) You should use Queues because if you just use an unprotected list, you may get or delete <em>the wrong item</em> because of race conditions.</p>\u000a
p1609
sVquestion_id
p1610
I6319207
sVlast_activity_date
p1611
I1307836840
sVcreation_date
p1612
I1307836840
sVscore
p1613
I104
sVowner
p1614
(dp1615
Vuser_id
p1616
I17624
sVprofile_image
p1617
Vhttps://www.gravatar.com/avatar/90285a816eda046ff55a0dcacc0c5ee8?s=128&d=identicon&r=PG
p1618
sVuser_type
p1619
Vregistered
p1620
sVreputation
p1621
I69283
sVlink
p1622
Vhttp://stackoverflow.com/users/17624/thomas-wouters
p1623
sVdisplay_name
p1624
VThomas Wouters
p1625
ssVis_accepted
p1626
I01
sVanswer_id
p1627
I6319267
sa(dp1628
Vbody
p1629
V<p>It's working exactly as it's supposed to. The transpose of a <em>1D</em> array is still a <em>1D</em> array!  (If you're used to matlab, it fundamentally doesn't have a concept of a 1D array. Matlab's "1D" arrays are 2D.)</p>\u000a\u000a<p>If you want to turn your 1D vector into a 2D array and then transpose it, just slice it with <code>np.newaxis</code> (or <code>None</code>, they're the same, <code>newaxis</code> is just more readable).</p>\u000a\u000a<pre><code>import numpy as np\u000aa = np.array([5,4])[np.newaxis]\u000aprint a\u000aprint a.T\u000a</code></pre>\u000a\u000a<p>Generally speaking though, you don't ever need to worry about this. Adding the extra dimension is usually not what you want, if you're just doing it out of habit.  Numpy will automatically broadcast a 1D array when doing various calculations. There's usually no need to distinguish between a row vector and a column vector (neither of which are <em>vectors</em>. They're both 2D!) when you just want a vector.</p>\u000a
p1630
sVquestion_id
p1631
I5954603
sVlast_activity_date
p1632
I1305053209
sVcreation_date
p1633
I1305052603
sVscore
p1634
I117
sVowner
p1635
(dp1636
Vuser_id
p1637
I325565
sVprofile_image
p1638
Vhttps://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG
p1639
sVuser_type
p1640
Vregistered
p1641
sVreputation
p1642
I136691
sVlink
p1643
Vhttp://stackoverflow.com/users/325565/joe-kington
p1644
sVdisplay_name
p1645
VJoe Kington
p1646
ssVis_accepted
p1647
I01
sVlast_edit_date
p1648
I1305053209
sVanswer_id
p1649
I5954747
sa(dp1650
Vbody
p1651
V<p>Be aware that you're currently testing for object identity (<code>is</code> only returns <code>True</code> if both operands are represented by the same object in memory - this is not always the case with two object that compare equal with <code>==</code>). If you are doing this on purpose, then you could rewrite your code as</p>\u000a\u000a<pre><code>some_dict = {key: value for key, value in some_dict.items() \u000a             if value is not value_to_remove}\u000a</code></pre>\u000a\u000a<p>But this may not do what you want:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; some_dict = {1: "Hello", 2: "Goodbye", 3: "You say yes", 4: "I say no"}\u000a&gt;&gt;&gt; value_to_remove = "You say yes"\u000a&gt;&gt;&gt; some_dict = {key: value for key, value in some_dict.items() if value is not value_to_remove}\u000a&gt;&gt;&gt; some_dict\u000a{1: 'Hello', 2: 'Goodbye', 3: 'You say yes', 4: 'I say no'}\u000a&gt;&gt;&gt; some_dict = {key: value for key, value in some_dict.items() if value != value_to_remove}\u000a&gt;&gt;&gt; some_dict\u000a{1: 'Hello', 2: 'Goodbye', 4: 'I say no'}\u000a</code></pre>\u000a\u000a<p>So you probably want <code>!=</code> instead of <code>is not</code>.</p>\u000a
p1652
sVquestion_id
p1653
I5447494
sVlast_activity_date
p1654
I1301206514
sVcreation_date
p1655
I1301205070
sVscore
p1656
I71
sVowner
p1657
(dp1658
Vuser_id
p1659
I20670
sVprofile_image
p1660
Vhttps://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG
p1661
sVuser_type
p1662
Vregistered
p1663
sVreputation
p1664
I209304
sVlink
p1665
Vhttp://stackoverflow.com/users/20670/tim-pietzcker
p1666
sVaccept_rate
p1667
I100
sVdisplay_name
p1668
VTim Pietzcker
p1669
ssVis_accepted
p1670
I01
sVlast_edit_date
p1671
I1301206514
sVanswer_id
p1672
I5447509
sa(dp1673
Vbody
p1674
V<p>Nothing, because python precompiles you script into PYC file and launches from it.\u000aOnly if some kind of exception occurs- you may get wrong explanation, because in line <strong>X</strong> may be different code that it was before starting script</p>\u000a
p1675
sVquestion_id
p1676
I5296977
sVlast_activity_date
p1677
I1300096099
sVcreation_date
p1678
I1300096099
sVscore
p1679
I95
sVowner
p1680
(dp1681
Vuser_id
p1682
I621401
sVprofile_image
p1683
Vhttps://www.gravatar.com/avatar/de6ee5889b111d77d87b47a184bcaeac?s=128&d=identicon&r=PG
p1684
sVuser_type
p1685
Vregistered
p1686
sVreputation
p1687
I2173
sVlink
p1688
Vhttp://stackoverflow.com/users/621401/lixas
p1689
sVaccept_rate
p1690
I100
sVdisplay_name
p1691
VLixas
p1692
ssVis_accepted
p1693
I01
sVanswer_id
p1694
I5296992
sa(dp1695
Vbody
p1696
V<p>It could be due to the architecture of your OS. Is your OS 64 Bit and have you installed 64 bit version of Python? It may help to install both 32 bit version <a href="http://www.python.org/ftp/python/3.1.3/python-3.1.3.msi">Python 3.1</a> and <a href="http://pygame.org/ftp/pygame-1.9.1.win32-py3.1.msi">Pygame</a>, which is available officially only in 32 bit and you won't face this problem.</p>\u000a\u000a<p>I see that 64 bit pygame is maintained <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame">here</a>, you might also want to try uninstalling Pygame only and install the 64 bit version on your existing python3.1, if not choose go for both 32-bit version.</p>\u000a
p1697
sVquestion_id
p1698
I4676433
sVlast_activity_date
p1699
I1294888730
sVcreation_date
p1700
I1294888730
sVscore
p1701
I139
sVowner
p1702
(dp1703
Vuser_id
p1704
I18852
sVprofile_image
p1705
Vhttps://www.gravatar.com/avatar/21bdb30e0a3bf7517c2a0795c65a20cd?s=128&d=identicon&r=PG
p1706
sVuser_type
p1707
Vregistered
p1708
sVreputation
p1709
I25672
sVlink
p1710
Vhttp://stackoverflow.com/users/18852/senthil-kumaran
p1711
sVaccept_rate
p1712
I68
sVdisplay_name
p1713
VSenthil Kumaran
p1714
ssVis_accepted
p1715
I01
sVanswer_id
p1716
I4676478
sa(dp1717
Vbody
p1718
V<p>Change the line to this:</p>\u000a\u000a<pre><code>handler = SysLogHandler(address='/dev/log')\u000a</code></pre>\u000a\u000a<p>This works for me</p>\u000a\u000a<pre><code>import logging\u000aimport logging.handlers\u000a\u000amy_logger = logging.getLogger('MyLogger')\u000amy_logger.setLevel(logging.DEBUG)\u000a\u000ahandler = logging.handlers.SysLogHandler(address = '/dev/log')\u000a\u000amy_logger.addHandler(handler)\u000a\u000amy_logger.debug('this is debug')\u000amy_logger.critical('this is critical')\u000a</code></pre>\u000a
p1719
sVquestion_id
p1720
I3968669
sVlast_activity_date
p1721
I1287500619
sVcreation_date
p1722
I1287500619
sVscore
p1723
I95
sVowner
p1724
(dp1725
Vuser_id
p1726
I457571
sVprofile_image
p1727
Vhttps://www.gravatar.com/avatar/2318229ef6310b03ab828bff43d2ad66?s=128&d=identicon&r=PG
p1728
sVuser_type
p1729
Vregistered
p1730
sVreputation
p1731
I10404
sVlink
p1732
Vhttp://stackoverflow.com/users/457571/dr-jimbob
p1733
sVaccept_rate
p1734
I100
sVdisplay_name
p1735
Vdr jimbob
p1736
ssVis_accepted
p1737
I01
sVanswer_id
p1738
I3969772
sa(dp1739
Vbody
p1740
V<p>Try:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; t = ((1, 'a'),(2, 'b'))\u000a&gt;&gt;&gt; dict((y, x) for x, y in t)\u000a{'a': 1, 'b': 2}\u000a</code></pre>\u000a
p1741
sVquestion_id
p1742
I3783530
sVlast_activity_date
p1743
I1285290476
sVcreation_date
p1744
I1285290476
sVscore
p1745
I154
sVowner
p1746
(dp1747
Vuser_id
p1748
I893
sVprofile_image
p1749
Vhttps://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG
p1750
sVuser_type
p1751
Vregistered
p1752
sVreputation
p1753
I552714
sVlink
p1754
Vhttp://stackoverflow.com/users/893/greg-hewgill
p1755
sVaccept_rate
p1756
I85
sVdisplay_name
p1757
VGreg Hewgill
p1758
ssVis_accepted
p1759
I01
sVanswer_id
p1760
I3783546
sa(dp1761
Vbody
p1762
V<p>I see many answers suggesting <a href="http://docs.python.org/library/itertools.html?highlight=itertools.tee#itertools.tee" rel="noreferrer">itertools.tee</a>, but that's ignoring one crucial warning in the docs for it:</p>\u000a\u000a<blockquote>\u000a  <p>This itertool may require significant\u000a  auxiliary storage (depending on how\u000a  much temporary data needs to be\u000a  stored). In general, if one iterator\u000a  uses most or all of the data before\u000a  another iterator starts, it is faster\u000a  to use <code>list()</code> instead of <code>tee()</code>.</p>\u000a</blockquote>\u000a\u000a<p>Basically, <code>tee</code> is designed for those situation where two (or more) clones of one iterator, while "getting out of sync" with each other, don't do so <em>by much</em> -- rather, they say in the same "vicinity" (a few items behind or ahead of each other).  Not suitable for the OP's problem of "redo from the start".</p>\u000a\u000a<p><code>L = list(DictReader(...))</code> on the other hand is perfectly suitable, as long as the list of dicts can fit comfortably in memory.  A new "iterator from the start" (very lightweight and low-overhead) can be made at any time with <code>iter(L)</code>, and used in part or in whole without affecting new or existing ones; other access patterns are also easily available.</p>\u000a\u000a<p>As several answers rightly remarked, in the specific case of <code>csv</code> you can also <code>.seek(0)</code> the underlying file object (a rather special case).  I'm not sure that's documented and guaranteed, though it does currently work;  it would probably be worth considering only for truly huge csv files, in which the <code>list</code> I recommmend as the general approach would have too large a memory footprint.</p>\u000a
p1763
sVquestion_id
p1764
I3266180
sVlast_activity_date
p1765
I1279298363
sVcreation_date
p1766
I1279298363
sVscore
p1767
I56
sVowner
p1768
(dp1769
Vuser_id
p1770
I95810
sVprofile_image
p1771
Vhttps://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG
p1772
sVuser_type
p1773
Vregistered
p1774
sVreputation
p1775
I516079
sVlink
p1776
Vhttp://stackoverflow.com/users/95810/alex-martelli
p1777
sVaccept_rate
p1778
I80
sVdisplay_name
p1779
VAlex Martelli
p1780
ssVis_accepted
p1781
I01
sVanswer_id
p1782
I3267069
sa(dp1783
Vbody
p1784
V<p>It's fairly simple. You write values using keys and expiry times. You get values using keys. You can expire keys from the system.</p>\u000a\u000a<p>Most clients follow the same rules. You can read the generic instructions and best practices on <a href="http://www.danga.com/memcached/" rel="noreferrer">the memcached homepage</a>.</p>\u000a\u000a<p>If you really want to dig into it, I'd look at the source. Here's the header comment:</p>\u000a\u000a<pre><code>"""\u000aclient module for memcached (memory cache daemon)\u000a\u000aOverview\u000a========\u000a\u000aSee U{the MemCached homepage&lt;http://www.danga.com/memcached&gt;} for more about memcached.\u000a\u000aUsage summary\u000a=============\u000a\u000aThis should give you a feel for how this module operates::\u000a\u000a    import memcache\u000a    mc = memcache.Client(['127.0.0.1:11211'], debug=0)\u000a\u000a    mc.set("some_key", "Some value")\u000a    value = mc.get("some_key")\u000a\u000a    mc.set("another_key", 3)\u000a    mc.delete("another_key")\u000a\u000a    mc.set("key", "1")   # note that the key used for incr/decr must be a string.\u000a    mc.incr("key")\u000a    mc.decr("key")\u000a\u000aThe standard way to use memcache with a database is like this::\u000a\u000a    key = derive_key(obj)\u000a    obj = mc.get(key)\u000a    if not obj:\u000a        obj = backend_api.get(...)\u000a        mc.set(key, obj)\u000a\u000a    # we now have obj, and future passes through this code\u000a    # will use the object from the cache.\u000a\u000aDetailed Documentation\u000a======================\u000a\u000aMore detailed documentation is available in the L{Client} class.\u000a"""\u000a</code></pre>\u000a
p1785
sVquestion_id
p1786
I868690
sVlast_activity_date
p1787
I1274576803
sVcreation_date
p1788
I1242394640
sVscore
p1789
I132
sVowner
p1790
(dp1791
Vuser_id
p1792
I12870
sVprofile_image
p1793
Vhttps://www.gravatar.com/avatar/f0af40756420859b5b63cbceb6d30505?s=128&d=identicon&r=PG
p1794
sVuser_type
p1795
Vregistered
p1796
sVreputation
p1797
I99098
sVlink
p1798
Vhttp://stackoverflow.com/users/12870/oli
p1799
sVaccept_rate
p1800
I63
sVdisplay_name
p1801
VOli
p1802
ssVis_accepted
p1803
I01
sVlast_edit_date
p1804
I1274576803
sVanswer_id
p1805
I868731
sa(dp1806
Vbody
p1807
V<p>If you have only one instance anyway, it's best to make all variables per-instance, simply because they will be accessed (a little bit) faster (one less level of "lookup" due to the "inheritance" from class to instance), and there are no downsides to weigh against this small advantage.</p>\u000a
p1808
sVquestion_id
p1809
I2714573
sVlast_activity_date
p1810
I1272294984
sVcreation_date
p1811
I1272294984
sVscore
p1812
I119
sVowner
p1813
(dp1814
Vuser_id
p1815
I95810
sVprofile_image
p1816
Vhttps://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG
p1817
sVuser_type
p1818
Vregistered
p1819
sVreputation
p1820
I516079
sVlink
p1821
Vhttp://stackoverflow.com/users/95810/alex-martelli
p1822
sVaccept_rate
p1823
I80
sVdisplay_name
p1824
VAlex Martelli
p1825
ssVis_accepted
p1826
I01
sVanswer_id
p1827
I2714590
sa(dp1828
Vbody
p1829
V<p>Think about somebody doing <code>help(yourmodule)</code> at the interactive interpreter's prompt -- what do they <strong>want</strong> to know?  (Other methods of extracting and displaying the information are roughly equivalent to <code>help</code> in terms of amount of information).  So if you have in <code>x.py</code>:</p>\u000a\u000a<pre><code>"""This module does blah blah."""\u000a\u000aclass Blah(object):\u000a  """This class does blah blah."""\u000a</code></pre>\u000a\u000a<p>then:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; import x; help(x)\u000a</code></pre>\u000a\u000a<p>shows:</p>\u000a\u000a<pre><code>Help on module x:\u000a\u000aNAME\u000a    x - This module does blah blah.\u000a\u000aFILE\u000a    /tmp/x.py\u000a\u000aCLASSES\u000a    __builtin__.object\u000a        Blah\u000a\u000a    class Blah(__builtin__.object)\u000a     |  This class does blah blah.\u000a     |  \u000a     |  Data and other attributes defined here:\u000a     |  \u000a     |  __dict__ = &lt;dictproxy object&gt;\u000a     |      dictionary for instance variables (if defined)\u000a     |  \u000a     |  __weakref__ = &lt;attribute '__weakref__' of 'Blah' objects&gt;\u000a     |      list of weak references to the object (if defined)\u000a</code></pre>\u000a\u000a<p>As you see, the detailed information on the classes (and functions too, though I'm not showing one here) is already included from those components' docstrings; the module's own docstring should describe them very summarily (if at all) and rather concentrate on a concise summary of what the module as a whole can do for you, ideally with some doctested examples (just like functions and classes ideally should have doctested examples in theit docstrings).</p>\u000a\u000a<p>I don't see how metadata such as author name and copyright / license helps the module's user -- it can rather go in comments, since it could help somebody considering whether or not to reuse or modify the module.</p>\u000a
p1830
sVquestion_id
p1831
I2557110
sVlast_activity_date
p1832
I1270078082
sVcreation_date
p1833
I1270078082
sVscore
p1834
I98
sVowner
p1835
(dp1836
Vuser_id
p1837
I95810
sVprofile_image
p1838
Vhttps://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG
p1839
sVuser_type
p1840
Vregistered
p1841
sVreputation
p1842
I516079
sVlink
p1843
Vhttp://stackoverflow.com/users/95810/alex-martelli
p1844
sVaccept_rate
p1845
I80
sVdisplay_name
p1846
VAlex Martelli
p1847
ssVis_accepted
p1848
I01
sVanswer_id
p1849
I2557196
sa(dp1850
Vbody
p1851
V<p>Follow along...:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; class A(object): pass\u000a... \u000a&gt;&gt;&gt; A.__mro__\u000a(&lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)\u000a&gt;&gt;&gt; class B(A): pass\u000a... \u000a&gt;&gt;&gt; B.__mro__\u000a(&lt;class '__main__.B'&gt;, &lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)\u000a&gt;&gt;&gt; class C(A): pass\u000a... \u000a&gt;&gt;&gt; C.__mro__\u000a(&lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)\u000a&gt;&gt;&gt; \u000a</code></pre>\u000a\u000a<p>As long as we have single inheritance, <code>__mro__</code> is just the tuple of: the class, its base, its base's base, and so on up to <code>object</code> (only works for new-style classes of course).</p>\u000a\u000a<p>Now, with <em>multiple</em> inheritance...:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; class D(B, C): pass\u000a... \u000a&gt;&gt;&gt; D.__mro__\u000a(&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)\u000a</code></pre>\u000a\u000a<p>...you also get the assurance that, in <code>__mro__</code>, no class is duplicated, and no class comes after its ancestors, save that classes that first enter at the same level of multiple inheritance (like B and C in this example) are in the <code>__mro__</code> left to right.</p>\u000a\u000a<p>Every attribute you get on a class's instance, not just methods, is conceptually looked up along the <code>__mro__</code>, so, if more than one class among the ancestors defines that name, this tells you where the attribute will be found -- in the first class in the <code>__mro__</code> that defines that name.</p>\u000a
p1852
sVquestion_id
p1853
I2010692
sVlast_activity_date
p1854
I1262747839
sVcreation_date
p1855
I1262747839
sVscore
p1856
I147
sVowner
p1857
(dp1858
Vuser_id
p1859
I95810
sVprofile_image
p1860
Vhttps://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG
p1861
sVuser_type
p1862
Vregistered
p1863
sVreputation
p1864
I516079
sVlink
p1865
Vhttp://stackoverflow.com/users/95810/alex-martelli
p1866
sVaccept_rate
p1867
I80
sVdisplay_name
p1868
VAlex Martelli
p1869
ssVis_accepted
p1870
I01
sVanswer_id
p1871
I2010732
sa(dp1872
Vbody
p1873
V<p>With so many solutions proposed, I'm amazed nobody's proposed what I'd consider an obvious one (for non-hashable but comparable elements) -- [<code>itertools.groupby</code>][1].  <code>itertools</code> offers fast, reusable functionality, and lets you delegate some tricky logic to well-tested standard library components.  Consider for example:</p>\u000a\u000a<pre><code>import itertools\u000aimport operator\u000a\u000adef most_common(L):\u000a  # get an iterable of (item, iterable) pairs\u000a  SL = sorted((x, i) for i, x in enumerate(L))\u000a  # print 'SL:', SL\u000a  groups = itertools.groupby(SL, key=operator.itemgetter(0))\u000a  # auxiliary function to get "quality" for an item\u000a  def _auxfun(g):\u000a    item, iterable = g\u000a    count = 0\u000a    min_index = len(L)\u000a    for _, where in iterable:\u000a      count += 1\u000a      min_index = min(min_index, where)\u000a    # print 'item %r, count %r, minind %r' % (item, count, min_index)\u000a    return count, -min_index\u000a  # pick the highest-count/earliest item\u000a  return max(groups, key=_auxfun)[0]\u000a</code></pre>\u000a\u000a<p>This could be written more concisely, of course, but I'm aiming for maximal clarity.  The two <code>print</code> statements can be uncommented to better see the machinery in action; for example, <em>with</em> prints uncommented:</p>\u000a\u000a<pre><code>print most_common(['goose', 'duck', 'duck', 'goose'])\u000a</code></pre>\u000a\u000a<p>emits:</p>\u000a\u000a<pre><code>SL: [('duck', 1), ('duck', 2), ('goose', 0), ('goose', 3)]\u000aitem 'duck', count 2, minind 1\u000aitem 'goose', count 2, minind 0\u000agoose\u000a</code></pre>\u000a\u000a<p>As you see, <code>SL</code> is a list of pairs, each pair an item followed by the item's index in the original list (to implement the key condition that, if the "most common" items with the same highest count are > 1, the result must be the earliest-occurring one).</p>\u000a\u000a<p><code>groupby</code> groups by the item only (via <code>operator.itemgetter</code>). The auxiliary function, called once per grouping during the <code>max</code> computation, receives and internally unpacks a group - a tuple with two items <code>(item, iterable)</code> where the iterable's items are also two-item tuples, <code>(item, original index)</code> [[the items of <code>SL</code>]].</p>\u000a\u000a<p>Then the auxiliary function uses a loop to determine both the count of entries in the group's iterable, <em>and</em> the minimum original index; it returns those as combined "quality key", with the min index sign-changed so the <code>max</code> operation will consider "better" those items that occurred earlier in the original list.</p>\u000a\u000a<p>This code could be much simpler if it worried a <em>little</em> less about big-O issues in time and space, e.g....:</p>\u000a\u000a<pre><code>def most_common(L):\u000a  groups = itertools.groupby(sorted(L))\u000a  def _auxfun((item, iterable)):\u000a    return len(list(iterable)), -L.index(item)\u000a  return max(groups, key=_auxfun)[0]\u000a</code></pre>\u000a\u000a<p>same basic idea, just expressed more simply and compactly... but, alas, an extra O(N) auxiliary space (to embody the groups' iterables to lists) and O(N squared) time (to get the <code>L.index</code> of every item). While premature optimization is the root of all evil in programming, deliberately picking an O(N squared) approach when an O(N log N) one is available just goes too much against the grain of scalability!-)</p>\u000a\u000a<p>Finally, for those who prefer "oneliners" to clarity and performance, a bonus 1-liner version with suitably mangled names:-).</p>\u000a\u000a<pre><code>from itertools import groupby as g\u000adef most_common_oneliner(L):\u000a  return max(g(sorted(L)), key=lambda(x, v):(len(list(v)),-L.index(x)))[0]\u000a</code></pre>\u000a
p1874
sVquestion_id
p1875
I1518522
sVlast_activity_date
p1876
I1254755789
sVcreation_date
p1877
I1254755789
sVscore
p1878
I60
sVowner
p1879
(dp1880
Vuser_id
p1881
I95810
sVprofile_image
p1882
Vhttps://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG
p1883
sVuser_type
p1884
Vregistered
p1885
sVreputation
p1886
I516079
sVlink
p1887
Vhttp://stackoverflow.com/users/95810/alex-martelli
p1888
sVaccept_rate
p1889
I80
sVdisplay_name
p1890
VAlex Martelli
p1891
ssVis_accepted
p1892
I01
sVanswer_id
p1893
I1520716
sa(dp1894
Vbody
p1895
V<p>Another option is to use the <code>itertools.tee()</code> function to create a second version of your generator:</p>\u000a\u000a<pre><code>y = FunctionWithYield()\u000ay, y_backup = tee(y)\u000afor x in y:\u000a    print(x)\u000afor x in y_backup:\u000a    print(x)\u000a</code></pre>\u000a\u000a<p>This could be beneficial from memory usage point of view if the original iteration might not process all the items.</p>\u000a
p1896
sVquestion_id
p1897
I1271320
sVlast_activity_date
p1898
I1250163857
sVcreation_date
p1899
I1250163857
sVscore
p1900
I57
sVowner
p1901
(dp1902
Vuser_id
p1903
I107366
sVprofile_image
p1904
Vhttps://www.gravatar.com/avatar/a664d7ca2f3788c22a3aafeedd1c9339?s=128&d=identicon&r=PG
p1905
sVuser_type
p1906
Vregistered
p1907
sVreputation
p1908
I32850
sVlink
p1909
Vhttp://stackoverflow.com/users/107366/ants-aasma
p1910
sVdisplay_name
p1911
VAnts Aasma
p1912
ssVis_accepted
p1913
I01
sVanswer_id
p1914
I1271481
sa(dp1915
Vbody
p1916
V<p>With most of these kinds of applications, you'll have to roll much of your own code for a statistical classification task. As Lucka suggested, NLTK is the perfect tool for natural language manipulation in Python, so long as your goal doesn't interfere with the non commercial nature of its license.  However, I would suggest other software packages for modeling.  I haven't found many strong advanced machine learning models available for Python, so I'm going to suggest some standalone binaries that easily cooperate with it.</p>\u000a\u000a<p>You may be interested in <a href="http://tadm.sf.net" rel="noreferrer">The Toolkit for Advanced Discriminative Modeling</a>, which can be easily interfaced with Python.  This has been used for classification tasks in various areas of natural language processing.  You also have a pick of a number of different models.  I'd suggest starting with Maximum Entropy classification so long as you're already familiar with implementing a Naive Bayes classifier.  If not, you may want to look into it and code one up to really get a decent understanding of statistical classification as a machine learning task.</p>\u000a\u000a<p>The University of Texas at Austin computational linguistics groups have held classes where most of the projects coming out of them have used this great tool.  You can look at the course page for <a href="http://comp.ling.utexas.edu/jbaldrid/courses/2006/cl2/" rel="noreferrer">Computational Linguistics II</a> to get an idea of how to make it work and what previous applications it has served.</p>\u000a\u000a<p>Another great tool which works in the same vein is <a href="http://mallet.cs.umass.edu/" rel="noreferrer">Mallet</a>.  The difference between Mallet is that there's a bit more documentation and some more models available, such as decision trees, and it's in Java, which, in my opinion, makes it a little slower.  <a href="http://www.cs.waikato.ac.nz/ml/weka/" rel="noreferrer">Weka</a> is a whole suite of different machine learning models in one big package that includes some graphical stuff, but it's really mostly meant for pedagogical purposes, and isn't really something I'd put into production.</p>\u000a\u000a<p>Good luck with your task.  The real difficult part will probably be the amount of knowledge engineering required up front for you to classify the 'seed set' off of which your model will learn.  It needs to be pretty sizeable, depending on whether you're doing binary classification (happy vs sad) or a whole range of emotions (which will require even more).  Make sure to hold out some of this engineered data for testing, or run some tenfold or remove-one tests to make sure you're actually doing a good job predicting before you put it out there. And most of all, have fun!  This is the best part of NLP and AI, in my opinion.</p>\u000a
p1917
sVquestion_id
p1918
I573768
sVlast_activity_date
p1919
I1235262383
sVcreation_date
p1920
I1235262383
sVscore
p1921
I41
sVowner
p1922
(dp1923
Vuser_id
p1924
I23102
sVprofile_image
p1925
Vhttps://www.gravatar.com/avatar/bd87354fbc19d5e7924fc6687fcf3104?s=128&d=identicon&r=PG
p1926
sVuser_type
p1927
Vregistered
p1928
sVreputation
p1929
I5543
sVlink
p1930
Vhttp://stackoverflow.com/users/23102/robert-elwell
p1931
sVdisplay_name
p1932
VRobert Elwell
p1933
ssVis_accepted
p1934
I01
sVanswer_id
p1935
I574015
sa(dp1936
Vbody
p1937
V<p>You're not saying how exactly <code>putdata()</code> is not behaving. I'm assuming you're doing </p>\u000a\u000a<pre><code>&gt;&gt;&gt; pic.putdata(a)\u000aTraceback (most recent call last):\u000a  File "...blablabla.../PIL/Image.py", line 1185, in putdata\u000a    self.im.putdata(data, scale, offset)\u000aSystemError: new style getargs format but argument is not a tuple\u000a</code></pre>\u000a\u000a<p>This is because <code>putdata</code> expects a sequence of tuples and you're giving it a numpy array. This</p>\u000a\u000a<pre><code>&gt;&gt;&gt; data = list(tuple(pixel) for pixel in pix)\u000a&gt;&gt;&gt; pic.putdata(data)\u000a</code></pre>\u000a\u000a<p>will work but it is very slow. </p>\u000a\u000a<p>As of PIL 1.1.6, the <a href="http://effbot.org/zone/pil-changes-116.htm" rel="noreferrer">"proper" way to convert between images and numpy arrays</a> is simply</p>\u000a\u000a<pre><code>&gt;&gt;&gt; pix = numpy.array(pic)\u000a</code></pre>\u000a\u000a<p>although the resulting array is in a different format than yours (3-d array or rows/columns/rgb in this case).</p>\u000a\u000a<p>Then, after you make your changes to the array, you should be able to do either <code>pic.putdata(pix)</code> or create a new image with <code>Image.fromarray(pix)</code>. </p>\u000a
p1938
sVquestion_id
p1939
I384759
sVlast_activity_date
p1940
I1230549108
sVcreation_date
p1941
I1229892381
sVscore
p1942
I104
sVowner
p1943
(dp1944
Vuser_id
p1945
I3002
sVprofile_image
p1946
Vhttps://www.gravatar.com/avatar/a9929763a96cad537d72c9eda8fe3741?s=128&d=identicon&r=PG
p1947
sVuser_type
p1948
Vregistered
p1949
sVreputation
p1950
I43484
sVlink
p1951
Vhttp://stackoverflow.com/users/3002/df
p1952
sVaccept_rate
p1953
I100
sVdisplay_name
p1954
VdF.
p1955
ssVis_accepted
p1956
I01
sVlast_edit_date
p1957
I1230549108
sVanswer_id
p1958
I384926
sa(dp1959
Vbody
p1960
V<p><a href="http://docs.python.org/lib/module-base64.html" rel="noreferrer">Base64 encoding</a> is in the standard library and will do to stop shoulder surfers:</p>\u000a\u000a<pre><code>&gt;&gt;&gt; import base64\u000a&gt;&gt;&gt; print base64.b64encode("password")\u000acGFzc3dvcmQ=\u000a&gt;&gt;&gt; print base64.b64decode("cGFzc3dvcmQ=")\u000apassword\u000a</code></pre>\u000a
p1961
sVquestion_id
p1962
I157938
sVlast_activity_date
p1963
I1222872231
sVcreation_date
p1964
I1222872231
sVscore
p1965
I68
sVowner
p1966
(dp1967
Vuser_id
p1968
I3171
sVprofile_image
p1969
Vhttps://www.gravatar.com/avatar/a780bab849bc39176f044f5effbba7da?s=128&d=identicon&r=PG
p1970
sVuser_type
p1971
Vregistered
p1972
sVreputation
p1973
I133854
sVlink
p1974
Vhttp://stackoverflow.com/users/3171/dave-webb
p1975
sVaccept_rate
p1976
I92
sVdisplay_name
p1977
VDave Webb
p1978
ssVis_accepted
p1979
I01
sVanswer_id
p1980
I157975
sasVquota_max
p1981
I300
sVquota_remaining
p1982
I212
s.